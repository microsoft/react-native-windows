parameters:
  - name: agentImage
    type: string
    default: ManagedImage
    values:
        - ManagedImage
        - HostedImage
  - name: fixupCommands
    type: boolean
    default: true
steps:
  - ${{ if eq(parameters.agentImage, 'HostedImage') }}:
    - task: NodeTool@0
      displayName: Set Node Version
      inputs:
        versionSpec: '22.x'

  - template: yarn-install.yml
    parameters:
      agentImage: ${{ parameters.agentImage }}
      fixupCommands: ${{ parameters.fixupCommands }}

  - script: yarn build
    displayName: yarn build
