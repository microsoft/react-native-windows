<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Native Platform: Native Modules · React Native for Windows</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="![Architecture](https://img.shields.io/badge/architecture-new_&amp;_old-green)"/><meta name="docsearch:version" content="0.80"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Native Platform: Native Modules · React Native for Windows"/><meta property="og:type" content="website"/><meta property="og:url" content="https://microsoft.github.io/react-native-windows/"/><meta property="og:description" content="![Architecture](https://img.shields.io/badge/architecture-new_&amp;_old-green)"/><meta property="og:image" content="https://microsoft.github.io/react-native-windows/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://microsoft.github.io/react-native-windows/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-native-windows/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="stylesheet" href="/react-native-windows/css/code-block-buttons.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/react-native-windows/js/code-block-buttons.js"></script><script type="text/javascript" src="/react-native-windows/js/nav-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/react-native-windows/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-native-windows/css/prism.css"/><link rel="stylesheet" href="/react-native-windows/css/main.css"/><script src="/react-native-windows/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-windows/"><img class="logo" src="/react-native-windows/img/header_logo.svg" alt="React Native for Windows"/><h2 class="headerTitleWithLogo">React Native for Windows</h2></a><a href="/react-native-windows/versions"><h3>0.80</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/react-native-windows/docs/0.80/getting-started" target="_self">Docs</a></li><li class=""><a href="/react-native-windows/docs/0.80/flyout-component" target="_self">APIs</a></li><li class=""><a href="https://devblogs.microsoft.com/react-native/" target="_self">Blog</a></li><li class=""><a href="/react-native-windows/resources" target="_self">Resources</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples" target="_self">Samples</a></li><li class=""><a href="/react-native-windows/support" target="_self">Support</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Native Development</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">The Basics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/getting-started">Get Started with Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/rnw-dependencies">System Requirements</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/react-native-windows-cli">React Native Windows CLI</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/parity-status">React Native Windows Components and APIs</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/config">React Native Config Schema</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/windowsbrush-and-theme">Using PlatformColor and Responding to Themes</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/releases">Release Strategy</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/platform">Platform Detection</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/upgrade-app">Upgrading App to Latest Version of React Native Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/migration-guide">Migration Guide</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/setup-ci">Setup Continuous Integration Pipeline for an RNW App</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/app-publishing">Publishing a React Native Windows App to the Microsoft Store</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/supported-community-modules">Supported Community Modules</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">CLI Commands<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/autolink-windows-cli">react-native autolink-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/codegen-windows-cli">react-native codegen-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/init-windows-cli">react-native init-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/run-windows-cli">react-native run-windows</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Native Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-platform">Overview</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-platform-getting-started">Getting Started</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/react-native-windows/docs/0.80/native-platform-modules">Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-platform-components">Native Components (Fabric)</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-platform-components-paper">Native Components (Paper)</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-platform-using">Using Native Libraries</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced Topics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/win10-vm">Developing Windows apps on a non-Windows PC</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/hermes">Hermes on Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/NuGet">Using Microsoft.ReactNative NuGet packages</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Troubleshooting<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/debugging-javascript">JavaScript Debugging</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/metro-config-out-tree-platforms">Metro config for out of tree platforms</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Legacy Docs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Native Modules</h4><ul><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules">Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/view-managers">Native UI Components</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-setup">Native Module Setup</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-vs-turbo-modules">Native Modules vs Turbo Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-using">Using Community Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-autolinking">Autolinking Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-advanced">Native Modules (Advanced)</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-troubleshooting">Troubleshooting Native Modules</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Native Development</h4><ul><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-code">Working with native code on Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-code-language-choice">Choosing C++ or C# for native code</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-marshalling-data">Marshaling Data</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-async">Using Asynchronous Windows APIs</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-jsvalue">Using JSValue</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/native-modules-csharp-codegen">Compile time code generation for C#</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/customizing-SDK-versions">Customizing SDK versions</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/0.80/managing-cpp-deps">Managing C++ dependencies</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/microsoft/react-native-windows-samples/blob/main/docs/native-platform-modules.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Native Platform: Native Modules</h1></header><article><div><span><p><img src="https://img.shields.io/badge/architecture-new_&amp;_old-green" alt="Architecture"></p>
<p>This guide covers exposing non-UI native functionality from Windows to React Native by implementing a <em>Native Module</em> for the Windows platform. For a higher-level overview of native development on Windows, see <a href="/react-native-windows/docs/0.80/native-platform">Native Platform: Overview</a> before reading this guide.</p>
<blockquote>
<p><strong>Note:</strong> See the <a href="https://reactnative.dev/docs/turbo-native-modules-introduction">reactnative.dev Native Modules guide</a> for steps for implementing new Native Modules for both the Android and iOS platforms.</p>
</blockquote>
<blockquote>
<p><strong>Architecture Note:</strong> This guide follows the recommendation to create a <em>Turbo Native Module</em> to support React Native's New Architecture. However, unlike other platforms, React Native for Windows directly supports Turbo Native Modules for the Old Architecture as well. In short, the Turbo Native Module we create here can be consumed by React Native for Windows apps targeting <em>either</em> architecture. For more information on React Native architectures in React Native for Windows, see <a href="/react-native-windows/docs/0.80/new-architecture">New vs. Old Architecture</a>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="high-level-overview"></a><a href="#high-level-overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>High-Level Overview</h2>
<p>In order to implement Windows support for a Native Module, you'll need to:</p>
<ol>
<li>Define the API surface for your Native Module in a TypeScript spec file</li>
<li>Use React Native for Windows' Native Library Codegen to take the TypeScript spec files and create the C++ headers for the Windows code</li>
<li>Write the Windows C++ code to implement the functions specified in the generated headers</li>
<li>Use the Native Module in your JavaScript</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="step-by-step-guide"></a><a href="#step-by-step-guide" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step by Step Guide</h2>
<h3><a class="anchor" aria-hidden="true" id="0-setup"></a><a href="#0-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0. Setup</h3>
<p>You'll need a React Native library project initialized with Windows support.</p>
<blockquote>
<p><strong>Note:</strong> The rest of this guide assumes you've followed the <a href="/react-native-windows/docs/0.80/native-platform-getting-started">Native Platform: Getting Started</a> guide to set up a new library project named <code>testlib</code>.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="1-define-the-api-surface-in-typescript"></a><a href="#1-define-the-api-surface-in-typescript" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Define the API surface in TypeScript</h3>
<p>The default template for a new library starts with a simple Turbo Native Module based on the name of the project, i.e. our <code>testlib</code> project contains a <code>TestLib</code> module, whose API surface is defined in <code>src\NativeTestlib.ts</code>:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { TurboModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { TurboModuleRegistry } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Spec <span class="hljs-keyword">extends</span> TurboModule {
  multiply(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> TurboModuleRegistry.getEnforcing&lt;Spec&gt;(<span class="hljs-string">'Testlib'</span>);
</code></pre>
<p>This spec file declares that React Native expects every platform to implement a Turbo Native Module named <code>Testlib</code> which implements a single function named <code>multiply</code> with the given arguments and return type.</p>
<blockquote>
<p><strong>Note:</strong> Every Native Module spec file must be named in the format <code>Native&lt;moduleName&gt; + .ts</code> in order to be correctly identified as a spec file and not just a regular TypeScript file in your library.</p>
</blockquote>
<!-- TODO: Add FancyMath example. -->
<h3><a class="anchor" aria-hidden="true" id="2-use-react-native-for-windows-native-library-codegen"></a><a href="#2-use-react-native-for-windows-native-library-codegen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Use React Native for Windows' Native Library Codegen</h3>
<p>Now, before we can implement the native C++ code for our Turbo Native Module(s), we need to run React Native for Windows' Native Library Codegen, i.e. the <a href="/react-native-windows/docs/0.80/codegen-windows-cli">codegen-windows command</a>, which will take the TypeScript spec files and generate some C++ headers with the API surface we need to implement.</p>
<p>First, we need to make sure that the <code>codegenConfig</code> object is properly defined in our library's <code>package.json</code> file:</p>
<pre><code class="hljs css language-json"><span class="token property">"codegenConfig"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"RNTestlibSpec"</span><span class="token punctuation">,</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"modules"</span><span class="token punctuation">,</span>
    <span class="token property">"jsSrcsDir"</span><span class="token operator">:</span> <span class="token string">"src"</span><span class="token punctuation">,</span>
    <span class="token property">"outputDir"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"ios"</span><span class="token operator">:</span> <span class="token string">"ios/generated"</span><span class="token punctuation">,</span>
      <span class="token property">"android"</span><span class="token operator">:</span> <span class="token string">"android/generated"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"android"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"javaPackageName"</span><span class="token operator">:</span> <span class="token string">"com.testlib"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"includesGeneratedCode"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"windows"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"namespace"</span><span class="token operator">:</span> <span class="token string">"testlibCodegen"</span><span class="token punctuation">,</span>
      <span class="token property">"outputDirectory"</span><span class="token operator">:</span> <span class="token string">"windows/testlib/codegen"</span><span class="token punctuation">,</span>
      <span class="token property">"separateDataTypes"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre>
<p>Configuration is partially shared with other platforms, but for Windows the relevant fields are <code>type</code>, <code>jsSrcsDirs</code>, and the <code>windows</code> object. For now we're going to leave the configuration as-is, as it is already set up to support our <code>Testlib</code> module.</p>
<blockquote>
<p><strong>Note:</strong> For more information on configuring <code>codegenConfig</code>, see <a href="/react-native-windows/docs/0.80/codegen-windows-cli#codegen-config">codegen-windows Codegen Config</a>.</p>
</blockquote>
<p>The only thing we need to do now is run the codegen-windows command with:</p>
<pre><code class="hljs css language-bat">yarn react-native codegen-windows
</code></pre>
<blockquote>
<p><strong>Note:</strong> By default the <code>codegen-windows</code> command is run automatically at the start of every native build. In this way, changes to the API surface in the TypeScript spec files will be reflected in the generated headers, thereby enforcing that the native code stays up to date with the required API surface of the module.</p>
</blockquote>
<p>Now we should see some files in the project's codegen output directory, i.e. the <code>windows\testlib\codegen</code> folder we specified in our config. Specifically, for our <code>Testlib</code> module, we should see a <code>NativeTestlibSpec.g.h</code> with:</p>
<pre><code class="hljs css language-cpp"><span class="token comment">/*
 * This file is auto-generated from a NativeModule spec file in js.
 *
 * This is a C++ Spec class that should be used with MakeTurboModuleProvider to register native modules
 * in a way that also verifies at compile time that the native module matches the interface required
 * by the TurboModule JS spec.
 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token comment">// clang-format off</span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;NativeModules.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;tuple></span></span>

<span class="token keyword">namespace</span> testlibCodegen <span class="token punctuation">{</span>

<span class="token keyword">struct</span> <span class="token class-name">TestlibSpec</span> <span class="token operator">:</span> <span class="token base-clause">winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span><span class="token class-name">TurboModuleSpec</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">auto</span> methods <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>tuple<span class="token punctuation">{</span>
      SyncMethod<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> L<span class="token string">"multiply"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">TModule</span><span class="token operator">></span>
  <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">void</span> <span class="token function">ValidateModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span>
    <span class="token keyword">constexpr</span> <span class="token keyword">auto</span> methodCheckResults <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CheckMethods</span><span class="token generic class-name"><span class="token operator">&lt;</span>TModule<span class="token punctuation">,</span> TestlibSpec<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">REACT_SHOW_METHOD_SPEC_ERRORS</span><span class="token punctuation">(</span>
          <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token string">"multiply"</span><span class="token punctuation">,</span>
          <span class="token string">"    REACT_SYNC_METHOD(multiply) double multiply(double a, double b) noexcept { /* implementation */ }\n"</span>
          <span class="token string">"    REACT_SYNC_METHOD(multiply) static double multiply(double a, double b) noexcept { /* implementation */ }\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token comment">// namespace testlibCodegen</span>
</code></pre>
<p>The purpose of the <code>TestlibSpec</code> type in this file, when included in our native C++ project, is to throw errors if our native C++ implementation does not match the required API surface of the module.</p>
<!-- TODO: Add FancyMath example. -->
<h3><a class="anchor" aria-hidden="true" id="3-implement-the-windows-c-code"></a><a href="#3-implement-the-windows-c-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Implement the Windows C++ code</h3>
<p>Now with the codegen complete, it's finally time to implement the <code>Testlib</code> module and its <code>multiply()</code> function.</p>
<h4><a class="anchor" aria-hidden="true" id="31-implementing-the-turbo-native-module"></a><a href="#31-implementing-the-turbo-native-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.1 Implementing the Turbo Native Module</h4>
<p>Conveniently our new project already includes implementations we can look at (for our example, the <code>testlib.h</code> and <code>testlib.cpp</code> in the <code>windows\testlib</code> folder):</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-137-tab-138" class="nav-link active" data-group="group_137" data-tab="tab-group-137-content-138">testlib.h</div><div id="tab-group-137-tab-139" class="nav-link" data-group="group_137" data-tab="tab-group-137-content-139">testlib.cpp</div></div><div class="tab-content"><div id="tab-group-137-content-138" class="tab-pane active" data-group="group_137" tabindex="-1"><div><span><pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"resource.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">__has_include</span><span class="token punctuation">(</span></span><span class="token string">"codegen/NativeTestlibDataTypes.g.h"</span><span class="token expression"><span class="token punctuation">)</span></span></span><br />  <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"codegen/NativeTestlibDataTypes.g.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"codegen/NativeTestlibSpec.g.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"NativeModules.h"</span></span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>testlib<br /><span class="token punctuation">{</span><br /><br /><span class="token function">REACT_MODULE</span><span class="token punctuation">(</span>Testlib<span class="token punctuation">)</span><br /><span class="token keyword">struct</span> <span class="token class-name">Testlib</span><br /><span class="token punctuation">{</span><br />  <span class="token keyword">using</span> ModuleSpec <span class="token operator">=</span> testlibCodegen<span class="token double-colon punctuation">::</span>TestlibSpec<span class="token punctuation">;</span><br /><br />  <span class="token function">REACT_INIT</span><span class="token punctuation">(</span>Initialize<span class="token punctuation">)</span><br />  <span class="token keyword">void</span> <span class="token function">Initialize</span><span class="token punctuation">(</span>React<span class="token double-colon punctuation">::</span>ReactContext <span class="token keyword">const</span> <span class="token operator">&amp;</span>reactContext<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token function">REACT_SYNC_METHOD</span><span class="token punctuation">(</span>multiply<span class="token punctuation">)</span><br />  <span class="token keyword">double</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">double</span> b<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">private</span><span class="token operator">:</span><br />  React<span class="token double-colon punctuation">::</span>ReactContext m_context<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br /><span class="token punctuation">}</span> <span class="token comment">// namespace winrt::testlib</span><br /></code></pre>
</span></div></div><div id="tab-group-137-content-139" class="tab-pane" data-group="group_137" tabindex="-1"><div><span><pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"testlib.h"</span></span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>testlib<br /><span class="token punctuation">{</span><br /><br /><span class="token comment">// See https://microsoft.github.io/react-native-windows/docs/native-platform for details on writing native modules</span><br /><br /><span class="token keyword">void</span> <span class="token class-name">Testlib</span><span class="token double-colon punctuation">::</span><span class="token function">Initialize</span><span class="token punctuation">(</span>React<span class="token double-colon punctuation">::</span>ReactContext <span class="token keyword">const</span> <span class="token operator">&amp;</span>reactContext<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  m_context <span class="token operator">=</span> reactContext<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">double</span> <span class="token class-name">Testlib</span><span class="token double-colon punctuation">::</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">double</span> b<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token punctuation">}</span> <span class="token comment">// namespace winrt::testlib</span><br /></code></pre>
</span></div></div></div></div>
<p>As you can see, the <code>testlib.h</code> file defines a <code>Testlib</code> struct, attributed with <code>REACT_MODULE</code> to signify to React Native for Windows that this struct contains the implementation of the Turbo Native Module named <code>Testlib</code>.</p>
<p>The <code>using ModuleSpec = testlibCodegen::TestlibSpec;</code> line is what makes sure that the <code>Testlib</code> struct will fail to compile if it doesn't meet the required API surface of the module.</p>
<blockquote>
<p><strong>Note:</strong> When adding Windows support to native modules with out-of-date (or missing) spec files, removing this line will allow your native code to compile even if it doesn't match what the JavaScript side of the library expects. While possible, this is not recommended as it risks the Windows implementation of the module getting out of sync with the other platforms.</p>
</blockquote>
<p>The <code>Initialize()</code> function is attributed with <code>REACT_INIT</code>, indicating it should be run when the module is first created. Looking at the implementation in <code>testlib.cpp</code> we see it saves off a <a href="/react-native-windows/docs/0.80/native-api/IReactContext"><code>ReactContext</code></a>, which your module can later use to interact back with the JavaScript side of your code (i.e. firing JavaScript events during a native operation).</p>
<p>Finally, we also see the <code>multiply()</code> function is attributed with <code>REACT_SYNC_METHOD</code>, indicating both that the function is part of the module's API surface,and that the function is synchronous. Looking at the implementation in <code>testlib.cpp</code> we see it does what we'd expect, multiplying the input parameters and returning the result.</p>
<!-- TODO: Add FancyMath. -->
<h4><a class="anchor" aria-hidden="true" id="32-adding-the-turbo-native-moduless-files-to-the-native-project"></a><a href="#32-adding-the-turbo-native-moduless-files-to-the-native-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.2 Adding the Turbo Native Modules's files to the native project</h4>
<p>By default the native Windows project (<code>windows\testlib\testlib.vcxproj</code> and <code>windows\testlib\testlib.vcxproj.filters</code> in our example) already includes the <code>testlib.h</code> and <code>testlib.cpp</code> files. But if you create new files for your module, you'll need to add those to the native Windows project manually:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-140-tab-141" class="nav-link active" data-group="group_140" data-tab="tab-group-140-content-141">testlib.vcxproj</div><div id="tab-group-140-tab-142" class="nav-link" data-group="group_140" data-tab="tab-group-140-content-142">testlib.vcxproj.filters</div></div><div class="tab-content"><div id="tab-group-140-content-141" class="tab-pane active" data-group="group_140" tabindex="-1"><div><span><pre><code class="hljs css language-diff">  &lt;ItemGroup&gt;<br />    &lt;ClInclude Include="testlib.h" /&gt;<br /><span class="hljs-addition">+   &lt;ClInclude Include="NEWFILE.h" /&gt;</span><br />    &lt;ClInclude Include="ReactPackageProvider.h"&gt;<br />      &lt;DependentUpon&gt;ReactPackageProvider.idl&lt;/DependentUpon&gt;<br />    &lt;/ClInclude&gt;<br />    &lt;ClInclude Include="resource.h" /&gt;<br />    &lt;ClInclude Include="pch.h" /&gt;<br />    &lt;ClInclude Include="targetver.h" /&gt;<br />  &lt;/ItemGroup&gt;<br />  &lt;ItemGroup&gt;<br />    &lt;ClCompile Include="testlib.cpp" /&gt;<br /><span class="hljs-addition">+   &lt;ClCompile Include="NEWFILE.cpp" /&gt;</span><br />    &lt;ClCompile Include="pch.cpp"&gt;<br />      &lt;PrecompiledHeader&gt;Create&lt;/PrecompiledHeader&gt;<br />    &lt;/ClCompile&gt;<br />    &lt;ClCompile Include="ReactPackageProvider.cpp"&gt;<br />      &lt;DependentUpon&gt;ReactPackageProvider.idl&lt;/DependentUpon&gt;<br />    &lt;/ClCompile&gt;<br />    &lt;ClCompile Include="$(GeneratedFilesDir)module.g.cpp" /&gt;<br />  &lt;/ItemGroup&gt;<br /></code></pre>
</span></div></div><div id="tab-group-140-content-142" class="tab-pane" data-group="group_140" tabindex="-1"><div><span><pre><code class="hljs css language-diff">  &lt;ItemGroup&gt;<br />    &lt;ClInclude Include="targetver.h"&gt;<br />      &lt;Filter&gt;Header Files&lt;/Filter&gt;<br />    &lt;/ClInclude&gt;<br />    &lt;ClInclude Include="resource.h"&gt;<br />      &lt;Filter&gt;Header Files&lt;/Filter&gt;<br />    &lt;/ClInclude&gt;<br />    &lt;ClInclude Include="testlib.h"&gt;<br />      &lt;Filter&gt;Header Files&lt;/Filter&gt;<br />    &lt;/ClInclude&gt;<br /><span class="hljs-addition">+   &lt;ClInclude Include="NEWFILE.h"&gt;</span><br /><span class="hljs-addition">+     &lt;Filter&gt;Header Files&lt;/Filter&gt;</span><br /><span class="hljs-addition">+   &lt;/ClInclude&gt;</span><br />    &lt;ClInclude Include="pch.h"&gt;<br />      &lt;Filter&gt;Header Files&lt;/Filter&gt;<br />    &lt;/ClInclude&gt;<br />  &lt;/ItemGroup&gt;<br />  &lt;ItemGroup&gt;<br />    &lt;ClCompile Include="testlib.cpp"&gt;<br />      &lt;Filter&gt;Source Files&lt;/Filter&gt;<br />    &lt;/ClCompile&gt;<br /><span class="hljs-addition">+   &lt;ClCompile Include="NEWFILE.cpp"&gt;</span><br /><span class="hljs-addition">+     &lt;Filter&gt;Source Files&lt;/Filter&gt;</span><br /><span class="hljs-addition">+   &lt;/ClCompile&gt;</span><br />    &lt;ClCompile Include="pch.cpp"&gt;<br />      &lt;Filter&gt;Source Files&lt;/Filter&gt;<br />    &lt;/ClCompile&gt;<br />  &lt;/ItemGroup&gt;<br /></code></pre>
</span></div></div></div></div>
<blockquote>
<p><strong>Note:</strong> All of the the headers created by codegen in the <code>windows/testlib/codegen</code> folder are already included and do not need to be added manually here.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="33-registering-the-turbo-native-module-with-the-react-package-provider"></a><a href="#33-registering-the-turbo-native-module-with-the-react-package-provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.3 Registering the Turbo Native Module with the React Package Provider</h4>
<p>Every React Native for Windows library contains an <a href="/react-native-windows/docs/0.80/native-api/IReactPackageProvider"><code>IReactPackageProvider</code></a> which contains all of the library's Native Modules (and/or Components) so React Native can use them at runtime.</p>
<p>The final bit of native work we need is to make sure <code>ReactPackageProvider::CreatePackage</code> adds all of the attributed modules in <code>windows\testlib\ReactPackageProvider.cpp</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">__has_include</span><span class="token punctuation">(</span></span><span class="token string">"ReactPackageProvider.g.cpp"</span><span class="token expression"><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.g.cpp"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"testlib.h"</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>testlib<span class="token double-colon punctuation">::</span>implementation <span class="token punctuation">{</span>

<span class="token keyword">void</span> <span class="token class-name">ReactPackageProvider</span><span class="token double-colon punctuation">::</span><span class="token function">CreatePackage</span><span class="token punctuation">(</span>IReactPackageBuilder <span class="token keyword">const</span> <span class="token operator">&amp;</span>packageBuilder<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span>
  <span class="token function">AddAttributedModules</span><span class="token punctuation">(</span>packageBuilder<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token comment">// namespace winrt::testlib::implementation</span>
</code></pre>
<p>Conveniently our new project already includes the code to include our <code>Testlib</code> Turbo Native Module.</p>
<p>The key bit here is the <code>#include &quot;testlib.h&quot;</code> include and the call to the <code>AddAttributedModules</code> function. This call makes sure that every Turbo Native Module (i.e. every struct attributed with <code>REACT_MODULE</code>), from every included header file, gets included in the library's package.</p>
<h3><a class="anchor" aria-hidden="true" id="4-use-the-native-module-in-your-javascript"></a><a href="#4-use-the-native-module-in-your-javascript" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Use the Native Module in your JavaScript</h3>
<p>Now, if we go back to the <code>NativeTestlib.ts</code> TypeScript spec file, we'll see that exports a type that is the Turbo Native Module named <code>Testlib</code> with an interface matching <code>Spec</code>. The next step is to use that exported object in our JavaScript code.</p>
<p>Since the purpose of the library is to expose the native functionality to code outside of the library (aka our React Native for Windows app code), the default is to export the functionality in the project's index, in this case, in <code>src\index.tsx</code>:</p>
<pre><code class="hljs css language-tsx"><span class="hljs-keyword">import</span> Testlib <span class="hljs-keyword">from</span> <span class="hljs-string">'./NativeTestlib'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> Testlib.multiply(a, b);
}
</code></pre>
<p>We can see then, that the <code>testlib</code> JavaScript module exports a <code>multiply()</code> function which internally calls the <code>Testlib.multiply()</code> function.</p>
<blockquote>
<p><strong>Note:</strong> Libraries are not required to expose any of their Native Module functions directly to their consumers. This sample just illustrates the simplest case of a pass-through call to the Native Module function. Libraries can and often do wrap their Native Modules within JavaScript ones, and therefore may provide a wholly different API surface to their customers.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="next-steps"></a><a href="#next-steps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h2>
<p>After you've implemented your native library, the final step is to consume it in your React Native for Windows app. Continue with <a href="/react-native-windows/docs/0.80/native-platform-using">Native Platform: Using Native Libraries</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/6/2025</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/react-native-windows/docs/0.80/native-platform-getting-started"><span class="arrow-prev">← </span><span>Getting Started</span></a><a class="docs-next button" href="/react-native-windows/docs/0.80/native-platform-components"><span>Native Components (Fabric)</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#high-level-overview">High-Level Overview</a></li><li><a href="#step-by-step-guide">Step by Step Guide</a><ul class="toc-headings"><li><a href="#0-setup">0. Setup</a></li><li><a href="#1-define-the-api-surface-in-typescript">1. Define the API surface in TypeScript</a></li><li><a href="#2-use-react-native-for-windows-native-library-codegen">2. Use React Native for Windows' Native Library Codegen</a></li><li><a href="#3-implement-the-windows-c-code">3. Implement the Windows C++ code</a></li><li><a href="#4-use-the-native-module-in-your-javascript">4. Use the Native Module in your JavaScript</a></li></ul></li><li><a href="#next-steps">Next Steps</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>React Native Docs</h5><a href="https://reactnative.dev/docs/getting-started">Getting Started</a><a href="https://reactnative.dev/docs/tutorial">Tutorial</a><a href="https://reactnative.dev/docs/components-and-apis">Components and APIs</a><a href="https://reactnative.dev/docs/more-resources">More Resources</a></div><div><h5>React Native for Windows Docs</h5><div style="color:white;font-weight:500;font-size:16px"><a href="/react-native-windows/docs/getting-started">Get Started with Windows</a></div><a href="/react-native-windows/docs/parity-status">React Native Windows Components and APIs</a><a href="/react-native-windows/docs/native-modules">Native Modules</a><a href="/react-native-windows/docs/view-managers">Native UI Components</a></div><div><h5>Connect With Us On</h5><a href="https://devblogs.microsoft.com/react-native/">Blog</a><a href="https://twitter.com/ReactNativeMSFT" target="_blank">Twitter</a><a href="https://github.com/microsoft/react-native-windows" target="_blank">GitHub</a><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples" target="_blank">Samples</a></div></section></footer></div></body></html>