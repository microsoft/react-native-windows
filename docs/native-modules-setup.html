<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Native Module Setup · React Native for Windows &amp; Mac</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&gt; **This documentation and the underlying platform code is a work in progress.** &gt;**Examples (C# and C++/WinRT):**"/><meta name="docsearch:version" content="0.61"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Native Module Setup · React Native for Windows &amp; Mac"/><meta property="og:type" content="website"/><meta property="og:url" content="https://microsoft.github.io/react-native-windows/"/><meta property="og:description" content="&gt; **This documentation and the underlying platform code is a work in progress.** &gt;**Examples (C# and C++/WinRT):**"/><meta property="og:image" content="https://microsoft.github.io/react-native-windows/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://microsoft.github.io/react-native-windows/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-native-windows/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://microsoft.github.io/react-native-windows/blog/atom.xml" title="React Native for Windows &amp; Mac Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://microsoft.github.io/react-native-windows/blog/feed.xml" title="React Native for Windows &amp; Mac Blog RSS Feed"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/react-native-windows/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-native-windows/css/prism.css"/><link rel="stylesheet" href="/react-native-windows/css/main.css"/><script src="/react-native-windows/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-windows/"><img class="logo" src="/react-native-windows/img/header_logo.svg" alt="React Native for Windows &amp; Mac"/><h2 class="headerTitleWithLogo">React Native for Windows &amp; Mac</h2></a><a href="/react-native-windows/versions"><h3>0.61</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/react-native-windows/docs/getting-started" target="_self">Docs</a></li><li class=""><a href="/react-native-windows/docs/flyout-component" target="_self">APIs</a></li><li class=""><a href="/react-native-windows/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows-samples/tree/master/samples" target="_self">Samples</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Native Modules (Windows)</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">The Basics (Windows)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/rnw-dependencies">System Requirements</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/contributing">Contributing to microsoft/react-native-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/parity-status">API Parity</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/windowsbrush-and-theme">Using Windows Brushes and Responding to Themes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Native Modules (Windows)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules">Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/view-managers">Native UI Components</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/react-native-windows/docs/native-modules-setup">Native Module Setup</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-using">Using Community Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-marshalling-data">Marshalling Data</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-jsvalue">Using JSValue</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-advanced">Native Modules (Advanced)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">The Basics (MacOS)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/rnm-getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/rnm-dependencies">System Requirements</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/microsoft/react-native-windows-samples/blob/master/docs/native-modules-setup.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Native Module Setup</h1></header><article><div><span><blockquote>
<p><strong>This documentation and the underlying platform code is a work in progress.</strong> &gt;<strong>Examples (C# and C++/WinRT):</strong></p>
<ul>
<li><a href="https://github.com/microsoft/react-native-windows-samples/tree/master/samples/NativeModuleSample">Native Module Sample in microsoft/react-native-windows-samples</a></li>
<li><a href="https://github.com/microsoft/react-native-windows/tree/master/packages/microsoft-reactnative-sampleapps">Sample App in microsoft/react-native-windows/packages/microsoft-reactnative-sampleapps</a></li>
</ul>
</blockquote>
<p>This guide will help set you up with the Visual Studio infrastructure to author your own stand-alone native module for React Native Windows. In this document we'll be creating the scaffolding for a <code>MyLibrary</code> native module.</p>
<h2><a class="anchor" aria-hidden="true" id="development-environment"></a><a href="#development-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Development Environment</h2>
<p>Make sure you have installed all of the <a href="/react-native-windows/docs/rnw-dependencies">development dependencies</a>.</p>
<p>If you're planning on writing in C++, you <em>must</em> install the <a href="https://marketplace.visualstudio.com/items?itemName=CppWinRTTeam.cppwinrt101804264">C++/WinRT Visual Studio Extension</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="choose-your-own-adventure"></a><a href="#choose-your-own-adventure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Choose your own adventure</h2>
<p>Once your development environment has been correctly configured, you have several options about how to access native APIs. You can either:</p>
<ul>
<li><a href="#Referencing-Windows-APIs-within-a-React-Native-for-Windows-project">Reference the APIs directly from within a React Native for Windows project</a></li>
<li><a href="#Creating-a-new-native-module-library-project">Create a new native module library that can be can be distributed separately from your app</a></li>
<li><a href="#Adding-Windows-support-to-an-existing-library">Add Windows support to an existing community library</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="referencing-windows-apis-within-a-react-native-for-windows-project"></a><a href="#referencing-windows-apis-within-a-react-native-for-windows-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Referencing Windows APIs within a React Native for Windows project</h2>
<p>If you are only planning on adding a native module to your existing React Native Windows app, ie:</p>
<ol>
<li>You followed the <a href="/react-native-windows/docs/getting-started">Getting Started</a> guide, where</li>
<li>You ran <code>npx react-native-windows-init</code> to add Windows to your project, and</li>
<li>You are just adding your native code to the app project under the <code>windows</code> folder.</li>
</ol>
<p>Then you can simply open the Visual Studio solution in the <code>windows</code> folder and add the new files directly to the app project.</p>
<h2><a class="anchor" aria-hidden="true" id="creating-a-new-native-module-library-project"></a><a href="#creating-a-new-native-module-library-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a new native module library project</h2>
<p>The steps to create a new native module library project are:</p>
<ol>
<li>Follow the official React Native instructions to create a blank native module project</li>
<li>Add Windows support to the newly created library</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="creating-a-blank-native-module-project"></a><a href="#creating-a-blank-native-module-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a blank native module project</h3>
<p>Follow the official React Native instructions at <a href="https://reactnative.dev/docs/native-modules-setup">https://reactnative.dev/docs/native-modules-setup</a>.</p>
<pre><code class="hljs css language-cmd">npx create-react-native-module MyLibrary
</code></pre>
<p>Now you'll have a new native module project under <code>react-native-my-library</code>. Be sure to look at the command output for further steps you'll want to do before publishing the project.</p>
<p>At this point, follow the steps below to add Windows support to the newly created library.</p>
<h2><a class="anchor" aria-hidden="true" id="adding-windows-support-to-an-existing-library"></a><a href="#adding-windows-support-to-an-existing-library" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Windows support to an existing library</h2>
<blockquote>
<p><strong>The plan is to automate this process as part of a CLI new library project template, see issues <a href="https://github.com/microsoft/react-native-windows/issues/3201">3201</a> and <a href="https://github.com/microsoft/react-native-windows/issues/3203">3203</a>. However we are also documenting the manual process here for developers who are unable to use the CLI.</strong></p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="updating-your-packagejson"></a><a href="#updating-your-packagejson" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Updating your package.json</h3>
<p>You'll need to ensure you have version 0.61 of both <code>react-native</code> and <code>react-native-windows</code>. In the directory for your native module project, you can update the dependencies with the following:</p>
<pre><code class="hljs css language-cmd">yarn add react-native@<span class="hljs-number">0</span>.<span class="hljs-number">61</span> --dev
yarn add react-native-windows@<span class="hljs-number">0</span>.<span class="hljs-number">61</span> --peer
</code></pre>
<p>Now it's time to switch into Visual Studio and create a new project.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-the-visual-studio-project--solution"></a><a href="#creating-the-visual-studio-project--solution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating the Visual Studio Project / Solution</h3>
<p>Open Visual Studio and select <code>Create a new project</code>. You're going to create a new <code>Windows Runtime Component</code> project, which produces a library that is compatible with Windows UWP apps.</p>
<p>If you're planning on writing your native module in C#, you'll want to choose the C# <code>Windows Runtime Component (Universal Windows)</code>:</p>
<p><img src="/react-native-windows/docs/assets/native-modules-setup-new-cs-project.png" alt="C# Windows Runtime Component (Universal Windows)"></p>
<p>If you're planning on writing your native module in C++, you'll want to choose <code>Windows Runtime Component (C++/WinRT)</code>:</p>
<p><img src="/react-native-windows/docs/assets/native-modules-setup-new-cpp-project.png" alt="Windows Runtime Component (C++/WinRT)"></p>
<blockquote>
<p><strong>Important:</strong> You want <em>C++/WinRT</em>, not <em>C++/CX</em>. Do <strong>not</strong> choose the C++/CX <code>Windows Runtime Component (Universal)</code> project-type:</p>
<p><img src="/react-native-windows/docs/assets/native-modules-setup-wrong-cpp-project.png" alt="Wrong Windows Runtime Component (Universal)"></p>
<p>If you don't see the <code>Windows Runtime Component (C++/WinRT)</code> project type, go back and install the <em>C++/WinRT Visual Studio Extension</em> under <a href="#development-environment">Development Environment</a>.</p>
</blockquote>
<ol>
<li>Set the <code>Project Name</code> to <code>MyLibrary</code>.</li>
<li>Set the <code>Location</code> to the native module directory (typically the same directory with the <code>ios</code> and <code>android</code> sub-directories).</li>
<li>Set the <code>Solution Name</code> to <code>MyLibrary</code>.</li>
<li>Click <code>Create</code>.</li>
</ol>
<p>Next you'll be prompted to select the versions of Windows you'll support. This should match the values for React Native Windows, which as of version 0.61, are:</p>
<ol>
<li>Set the <code>Target version</code> to <code>Windows 10, version 1903 (10.0; Build 18362)</code>.</li>
<li>Set the <code>Minimum version</code> to <code>Windows 10 Creators Update (10.0; Build 15063)</code>.</li>
</ol>
<p>You should now have a new <code>MyLibrary</code> solution file at <code>.\MyLibrary\MyLibrary.sln</code> and a <code>MyLibrary</code> project at <code>.\MyLibrary\MyLibrary\MyLibrary.csproj</code> for C# or <code>.\MyLibrary\MyLibrary\MyLibrary.vcxproj</code> for C++.</p>
<p>Additionally, for C++/WinRT projects, you'll need to change the following:</p>
<ol>
<li>Right click on the project and choose <code>Manage Nuget Packages...</code>
<ol>
<li>Select version 2.0.190730.2 for Microsoft.Windows.CppWinRT package.</li>
</ol></li>
<li>Right-click on the project and choose <code>Properties</code>
<ol>
<li>Under <code>Linker &gt; Windows Metadata</code> set <code>Generate Windows Metadata</code> to <code>Yes</code>.</li>
</ol></li>
</ol>
<p>Now, before we go any further we'll want to rename the root directory of the Windows native code to <code>windows</code> to match the peer <code>android</code> and <code>ios</code> directories:</p>
<ol>
<li>Close the solution with <code>File</code> &gt; <code>Close Solution</code>.</li>
<li>Rename that top <code>MyLibrary</code> directory <code>windows</code>.</li>
<li>Re-open the solution file at <code>windows\MyLibrary.sln</code>.</li>
</ol>
<blockquote>
<p><em>Optional</em>: Whether you're creating a new native module from scratch, or adding windows support to an existing ios/android module, if you're using git, you'll want to add Visual Studio-specific entries in your project's <code>.gitignore</code>.
The simplest way to do this is to get <a href="https://raw.githubusercontent.com/github/gitignore/master/VisualStudio.gitignore">VisualStudio.gitignore</a> and save it as <code>windows\.gitignore</code>.</p>
</blockquote>
<p>Now it's time to add React Native Windows into the solution.</p>
<h3><a class="anchor" aria-hidden="true" id="adding-react-native-windows-to-the-visual-studio-solution"></a><a href="#adding-react-native-windows-to-the-visual-studio-solution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding React Native Windows to the Visual Studio Solution</h3>
<p>We're going to add several React Native Windows projects to your solution. So to avoid confusing them with your own code, we're first going to create a solution folder called <code>ReactNative</code>:</p>
<ol>
<li>Open the Solution Explorer sidebar.</li>
<li>Right-click on <code>Solution 'MyLibrary'</code> at the top.</li>
<li>Select <code>Add</code> &gt; <code>New Solution Folder</code>.</li>
<li>Name the folder <code>ReactNative</code>.</li>
</ol>
<p>Now we're going to add all of the following React Native Windows projects to that <code>ReactNative</code> folder. All of these projects are located under the <code>node_modules\react-native-windows</code> directory in the root of your <code>react-native-my-library</code> project directory.</p>
<blockquote>
<p><em>For more details about what these projects do, see <a href="/react-native-windows/docs/project-structure">Project Structure</a>.</em></p>
</blockquote>
<table>
<thead>
<tr><th style="text-align:left">VS Project</th><th style="text-align:left">Project File</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Chakra</td><td style="text-align:left"><code>Chakra\Chakra.vcxitems</code></td></tr>
<tr><td style="text-align:left">Common</td><td style="text-align:left"><code>Common\Common.vcxproj</code></td></tr>
<tr><td style="text-align:left">Folly</td><td style="text-align:left"><code>Folly\Folly.vcxproj</code></td></tr>
<tr><td style="text-align:left">JSI.Shared</td><td style="text-align:left"><code>JSI\Shared\JSI.Shared.vcxitems</code></td></tr>
<tr><td style="text-align:left">JSI.Universal</td><td style="text-align:left"><code>JSI\Universal\JSI.Universal.vcxproj</code></td></tr>
<tr><td style="text-align:left">Microsoft.ReactNative</td><td style="text-align:left"><code>Microsoft.ReactNative\Microsoft.ReactNative.vcxproj</code></td></tr>
<tr><td style="text-align:left">Microsoft.ReactNative.Cxx</td><td style="text-align:left"><code>Microsoft.ReactNative.Cxx\Microsoft.ReactNative.Cxx.vcxitems</code></td></tr>
<tr><td style="text-align:left">Microsoft.ReactNative.SharedManaged</td><td style="text-align:left"><code>Microsoft.ReactNative.SharedManaged\Microsoft.ReactNative.SharedManaged.shproj</code></td></tr>
<tr><td style="text-align:left">Mso</td><td style="text-align:left"><code>Mso\Mso.vcxitems</code></td></tr>
<tr><td style="text-align:left">ReactCommon</td><td style="text-align:left"><code>ReactCommon\ReactCommon.vcxproj</code></td></tr>
<tr><td style="text-align:left">ReactWindowsCore</td><td style="text-align:left"><code>ReactWindowsCore\ReactWindowsCore.vcxproj</code></td></tr>
<tr><td style="text-align:left">Shared</td><td style="text-align:left"><code>Shared\Shared.vcxitems</code></td></tr>
</tbody>
</table>
<p>For each project, you'll do the following:</p>
<ol>
<li>Open the Solution Explorer sidebar.</li>
<li>Right-click on the <code>ReactNative</code> folder.</li>
<li>Select <code>Add</code> &gt; <code>Existing Project...</code>.</li>
<li>Select the project file and click <code>Open</code>.</li>
</ol>
<p>When you are done, your solution should look like this:
<img src="/react-native-windows/docs/assets/native-module-dependencies.png" alt="native module dependencies"></p>
<p>You now have all of the React Native Windows projects to your solution. Next we're going to reference them in our <code>MyLibrary</code> project.</p>
<h3><a class="anchor" aria-hidden="true" id="referencing-react-native-windows-in-your-project"></a><a href="#referencing-react-native-windows-in-your-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Referencing React Native Windows in your Project</h3>
<p>The only project reference you <strong>must</strong> add is <code>Microsoft.ReactNative</code>. To add the reference:</p>
<ol>
<li>Open the Solution Explorer sidebar.</li>
<li>Right-click on your <code>MyLibrary</code> project.</li>
<li>Select <code>Add</code> &gt; <code>Reference</code>.</li>
<li>Select <code>Projects</code> on the left-hand side.</li>
<li>Check the box next to <code>Microsoft.ReactNative</code>.</li>
<li>Click <code>OK</code>.</li>
</ol>
<p>After you've added the reference, you need to make sure it doesn't copy itself into your build (otherwise it'll cause build conflicts down the line when you're trying on consume your library):</p>
<ol>
<li>Open the Solution Explorer sidebar.</li>
<li>Under your <code>MyLibrary</code> project, expand the <code>References</code>.</li>
<li>Right-click on <code>Microsoft.ReactNative</code>.</li>
<li>Select <code>Properties</code>.</li>
<li>Under <code>Build</code>, Change <code>Copy Local</code> to <code>False</code>.</li>
</ol>
<p>Now, you're technically ready to go, but in order to improve the developer experience, it's also <strong>highly recommended</strong> to also add a reference to the appropriate helper shared project. These projects contain the attributes (C#) and macros (C++) as described in the <a href="/react-native-windows/docs/native-modules">Native Modules</a> and <a href="/react-native-windows/docs/view-managers">View Managers</a> documents.</p>
<p>If you're writing in C#, you'll want to add <code>Microsoft.ReactNative.SharedManaged</code>:</p>
<ol>
<li>Open the Solution Explorer sidebar.</li>
<li>Right-click on your <code>MyLibrary</code> project.</li>
<li>Select <code>Add</code> &gt; <code>Reference</code>.</li>
<li>Select <code>Shared Projects</code> on the left-hand side.</li>
<li>Check the box next to <code>Microsoft.ReactNative.SharedManaged</code>.</li>
<li>Click <code>OK</code>.</li>
</ol>
<p>If you're writing in C++, you'll want to add <code>Microsoft.ReactNative.Cxx</code>:</p>
<ol>
<li>Open the Solution Explorer sidebar.</li>
<li>Right-click on your <code>MyLibrary</code> project.</li>
<li>Select <code>Add</code> &gt; <code>Reference</code>.</li>
<li>Select <code>Shared Projects</code> on the left-hand side.</li>
<li>Check the box next to <code>Microsoft.ReactNative.Cxx</code>.</li>
<li>Click <code>OK</code>.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="testing-your-build"></a><a href="#testing-your-build" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing your Build</h3>
<p>To make sure that everything is working, you'll want to try building <code>MyLibrary</code>. First you'll want to make sure you've chosen a supported platform:</p>
<ol>
<li>At the top, change the <code>Solution Platform</code> to <code>x86</code> or <code>x64</code>.</li>
<li>In the <code>Build</code> menu, select <code>Build Solution</code>.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="next-steps"></a><a href="#next-steps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h3>
<p>You have now created the scaffolding to build a native module or view manager. Now it's time to add the business logic to the module - follow the steps described in the <a href="/react-native-windows/docs/native-modules">Native Modules</a> and <a href="/react-native-windows/docs/view-managers">View Managers</a> documents.</p>
<h3><a class="anchor" aria-hidden="true" id="testing-the-module-before-it-gets-published"></a><a href="#testing-the-module-before-it-gets-published" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing the module before it gets published</h3>
<h4><a class="anchor" aria-hidden="true" id="option-1-create-a-new-test-app"></a><a href="#option-1-create-a-new-test-app" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option 1: Create a new test app</h4>
<ol>
<li>Follow the <a href="/react-native-windows/docs/getting-started">getting started guide</a> to create a new React Native Windows app.</li>
<li>Run <code>npm i &lt;module-local-path&gt; --save</code> (e.g. <code>npm i D:\MyLibrary --save</code>) to install the local module.</li>
<li><a href="/react-native-windows/docs/native-modules-using">Link the native module</a>.</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="option-2-adding-windows-support-to-existing-sample-app"></a><a href="#option-2-adding-windows-support-to-existing-sample-app" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option 2: Adding Windows support to existing sample app</h4>
<p>If you are working on an existing module that already has iOS and Android samples, and want to add Windows support to the existing test app, follow these steps (example of WebView module test app can be found <a href="https://github.com/react-native-community/react-native-webview/tree/master/example">here</a>).</p>
<ol>
<li>In a different directory, follow the <a href="/react-native-windows/docs/getting-started">getting started guide</a> and create a new React Native Windows app.</li>
<li>Copy the <code>Windows</code> folder from the blank RNW app into the existing sample app's sample app's folder. (The RNW CLI helps create the correct project setup that you can then copy directly into the sample app.)</li>
<li>Open <code>sln</code> and <code>vxcproj</code> files and check <code>node_module</code> reference paths. Fix the paths if necessary based on how the folders are structured in native module repo (<a href="https://github.com/react-native-community/react-native-webview/blob/master/example/windows/WebViewWindows.sln#L11-L42">example</a>).</li>
<li>Open the solution with Visual Studio and <a href="/react-native-windows/docs/native-modules-using">link native module</a>.</li>
</ol>
<pre><code class="hljs">&gt;The project should build correctly at this point, but we still need to setup some special metro configurations for Windows in order to run the app without breaking iOS and Android bundling.
</code></pre>
<ol start="5">
<li>Add <code>metro.config.windows</code> for Windows bundling (<a href="https://github.com/react-native-community/react-native-webview/blob/master/metro.config.windows.js">example</a>).</li>
<li>In <code>package.json</code>, add a separate start command for windows and attach a special argument to tell metro to use the windows config we just created (<a href="https://github.com/react-native-community/react-native-webview/blob/master/package.json#L18">example</a>).</li>
<li>Add <code>react-native.config.js</code> to parse the special argument we added (<a href="https://github.com/react-native-community/react-native-webview/blob/master/react-native.config.js#L28-L33">example</a>).</li>
<li>Update JS main module path (relative path to metro projectRoot) in <code>App.cpp</code> if necessary (<a href="https://github.com/react-native-community/react-native-webview/blob/master/example/windows/WebViewWindows/App.cpp#L25">example</a>).</li>
</ol>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/react-native-windows/docs/view-managers"><span class="arrow-prev">← </span><span>Native UI Components</span></a><a class="docs-next button" href="/react-native-windows/docs/native-modules-using"><span>Using Community Native Modules</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#development-environment">Development Environment</a></li><li><a href="#choose-your-own-adventure">Choose your own adventure</a></li><li><a href="#referencing-windows-apis-within-a-react-native-for-windows-project">Referencing Windows APIs within a React Native for Windows project</a></li><li><a href="#creating-a-new-native-module-library-project">Creating a new native module library project</a><ul class="toc-headings"><li><a href="#creating-a-blank-native-module-project">Creating a blank native module project</a></li></ul></li><li><a href="#adding-windows-support-to-an-existing-library">Adding Windows support to an existing library</a><ul class="toc-headings"><li><a href="#updating-your-packagejson">Updating your package.json</a></li><li><a href="#creating-the-visual-studio-project--solution">Creating the Visual Studio Project / Solution</a></li><li><a href="#adding-react-native-windows-to-the-visual-studio-solution">Adding React Native Windows to the Visual Studio Solution</a></li><li><a href="#referencing-react-native-windows-in-your-project">Referencing React Native Windows in your Project</a></li><li><a href="#testing-your-build">Testing your Build</a></li><li><a href="#next-steps">Next Steps</a></li><li><a href="#testing-the-module-before-it-gets-published">Testing the module before it gets published</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>React Native Docs</h5><a href="https://reactnative.dev/docs/getting-started">Getting Started</a><a href="https://reactnative.dev/docs/tutorial">Tutorial</a><a href="https://reactnative.dev/docs/components-and-apis">Components and APIs</a><a href="https://reactnative.dev/docs/more-resources">More Resources</a></div><div><h5>React Native for Windows Docs</h5><a href="/react-native-windows/docs/getting-started">Getting Started</a><a href="/react-native-windows/docs/parity-status">API parity with React Native</a><a href="/react-native-windows/docs/native-modules">Native Modules</a><a href="/react-native-windows/docs/view-managers">Native UI Components</a><a href="/react-native-windows/docs/windowsbrush-and-theme">Windows Brushes and Themes</a></div><div><h5>More Resources</h5><a href="/react-native-windows/blog/">Blog</a><a href="https://twitter.com/ReactNativeMSFT" target="_blank">Twitter</a><a href="https://github.com/microsoft/react-native-windows" target="_blank">GitHub</a><a href="https://github.com/microsoft/react-native-windows-samples/tree/master/samples" target="_blank">Samples</a></div></section></footer></div></body></html>