<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Native UI Components · React Native for Windows</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&gt; **This documentation and the underlying platform code is a work in progress.** &gt;**Examples (C# and C++/WinRT):**"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Native UI Components · React Native for Windows"/><meta property="og:type" content="website"/><meta property="og:url" content="https://microsoft.github.io/react-native-windows/"/><meta property="og:description" content="&gt; **This documentation and the underlying platform code is a work in progress.** &gt;**Examples (C# and C++/WinRT):**"/><meta property="og:image" content="https://microsoft.github.io/react-native-windows/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://microsoft.github.io/react-native-windows/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-native-windows/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://microsoft.github.io/react-native-windows/blog/atom.xml" title="React Native for Windows Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://microsoft.github.io/react-native-windows/blog/feed.xml" title="React Native for Windows Blog RSS Feed"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/react-native-windows/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-native-windows/css/prism.css"/><link rel="stylesheet" href="/react-native-windows/css/main.css"/><script src="/react-native-windows/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-windows/"><img class="logo" src="/react-native-windows/img/header_logo.svg" alt="React Native for Windows"/><h2 class="headerTitleWithLogo">React Native for Windows</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/react-native-windows/docs/getting-started" target="_self">Docs</a></li><li class=""><a href="/react-native-windows/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows-samples/tree/master/samples" target="_self">Samples</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/microsoft/react-native-windows-samples/blob/master/docs/view-managers.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Native UI Components</h1></header><article><div><span><blockquote>
<p><strong>This documentation and the underlying platform code is a work in progress.</strong> &gt;<strong>Examples (C# and C++/WinRT):</strong></p>
<ul>
<li><a href="https://github.com/microsoft/react-native-windows-samples/tree/master/samples/NativeModuleSample">Native Module Sample in microsoft/react-native-windows-samples</a></li>
<li><a href="../../packages/microsoft-reactnative-sampleapps">Sample App in microsoft/react-native-windows/packages/microsoft-reactnative-sampleapps</a></li>
</ul>
</blockquote>
<p>There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like ScrollView and TextInput, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.</p>
<p>Like the <a href="/react-native-windows/docs/native-modules">native module guide</a>, this too is a more advanced guide that assumes you are somewhat familiar with UWP programming. This guide will show you how to build a native UI component, walking you through the implementation of a subset of the existing ImageView component available in the core React Native library.</p>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>Similarly to authoring native modules, at a high level you must:</p>
<ol>
<li>Author a ViewManager which defines a new Component type and understands how to create and interact with the native UI widget.</li>
<li>Register your new ViewManager within the native code of your React Native host application.</li>
<li>Reference the new Component within your React Native JSX code.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="initial-setup"></a><a href="#initial-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initial Setup</h2>
<p>This guide assumes you already have the development environment and project structure set up for authoring native modules and are ready to write code.</p>
<p>If you are only planning on adding a native module to your existing React Native Windows app, ie:</p>
<ol>
<li>You followed <a href="/react-native-windows/docs/consuming-rnw">Consuming react native windows</a>, where</li>
<li>You ran <code>react-native windows --template vnext</code> to add Windows to your project, and</li>
<li>You are just adding your native code to the app project under the <code>windows</code> folder.</li>
</ol>
<p>Then you can simply open the Visual Studio solution in the <code>windows</code> folder and add the new files directly to the app project.</p>
<p>If you are instead creating a standalone native module, or adding Windows support to an existing native module, check out the <a href="/react-native-windows/docs/native-modules-setup">Native Modules Setup</a> guide first.</p>
<h2><a class="anchor" aria-hidden="true" id="sample-viewmanager-c"></a><a href="#sample-viewmanager-c" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample ViewManager (C#)</h2>
<h3><a class="anchor" aria-hidden="true" id="attributes"></a><a href="#attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attributes</h3>
<table>
<thead>
<tr><th>Attribute</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td><code>ViewManagerExportedViewConstant</code></td><td>Specifies a field or property that represents a constant.</td></tr>
<tr><td><code>ViewManagerProperty</code></td><td>Specifies a method to be called to set a property on an instance of a native UI widget.</td></tr>
<tr><td><code>ViewManagerCommand</code></td><td>Specifies a method that can be called on an instance of a native UI widget.</td></tr>
</tbody>
</table>
<p>For this sample, assume we have the following <code>CustomUserControl</code> that we want to use in React Native.</p>
<p><em>CustomUserControl.cs</em></p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">;</span>
<span class="token keyword">using</span> Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">.</span>Controls<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> ViewManagerSample
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserControl</span> <span class="token punctuation">:</span> <span class="token class-name">Control</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DependencyProperty</span> LabelProperty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">string</span> Label
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token function">GetValue</span><span class="token punctuation">(</span>LabelProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                <span class="token function">SetValue</span><span class="token punctuation">(</span>LabelProperty<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">static</span> <span class="token function">CustomUserControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            LabelProperty <span class="token operator">=</span> DependencyProperty<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span>
                <span class="token function">nameof</span><span class="token punctuation">(</span>Label<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">typeof</span><span class="token punctuation">(</span>CustomUserControl<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">PropertyMetadata</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token function">CustomUserControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            DefaultStyleKey <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span>CustomUserControl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ResourceDictionary</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="hljs-attr">xmlns:x</span>=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="hljs-attr">xmlns:local</span>=<span class="hljs-string">"using:ViewManagerSample"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">Style</span> <span class="hljs-attr">TargetType</span>=<span class="hljs-string">"local:CustomUserControl"</span> &gt;</span><span class="xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">Setter</span> <span class="hljs-attr">Property</span>=<span class="hljs-string">"Template"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Setter.Value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ControlTemplate</span> <span class="hljs-attr">TargetType</span>=<span class="hljs-string">"local:CustomUserControl"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Border</span>
                        <span class="hljs-attr">Background</span>=<span class="hljs-string">"{TemplateBinding Background}"</span>
                        <span class="hljs-attr">BorderBrush</span>=<span class="hljs-string">"{TemplateBinding BorderBrush}"</span>
                        <span class="hljs-attr">BorderThickness</span>=<span class="hljs-string">"{TemplateBinding BorderThickness}"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"{TemplateBinding Foreground}"</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"{TemplateBinding Label}"</span> <span class="hljs-attr">TextAlignment</span>=<span class="hljs-string">"Center"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">ControlTemplate</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Setter.Value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Setter</span>&gt;</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ResourceDictionary</span>&gt;</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="1-authoring-your-view-manager"></a><a href="#1-authoring-your-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Authoring your View Manager</h4>
<p>Here is a sample view manager written in C# called <code>CustomUserControlViewManager</code>.</p>
<p><em>CustomUserControlViewManager.cs</em></p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">.</span>Media<span class="token punctuation">;</span>
<span class="token keyword">using</span> Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">.</span>Controls<span class="token punctuation">;</span>

<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>Managed<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> ViewManagerSample
<span class="token punctuation">{</span>
    <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserControlViewManager</span> <span class="token punctuation">:</span> <span class="token class-name">AttributedViewManager</span><span class="token operator">&lt;</span>CustomUserControlCS<span class="token operator">></span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token class-name">ViewManagerProperty</span><span class="token punctuation">(</span><span class="token string">"label"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetLabel</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> view<span class="token punctuation">,</span> <span class="token keyword">string</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                view<span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span>CustomUserControl<span class="token punctuation">.</span>LabelProperty<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                view<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>CustomUserControl<span class="token punctuation">.</span>LabelProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">ViewManagerProperty</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> <span class="token class-name">Brush</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                view<span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span>Control<span class="token punctuation">.</span>ForegroundProperty<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                view<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>Control<span class="token punctuation">.</span>ForegroundProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">ViewManagerProperty</span><span class="token punctuation">(</span><span class="token string">"backgroundColor"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetBackgroundColor</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> <span class="token class-name">Brush</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                view<span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span>Control<span class="token punctuation">.</span>BackgroundProperty<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                view<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>Control<span class="token punctuation">.</span>BackgroundProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">ViewManagerCommand</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">CustomCommand</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> IReadonlyList<span class="token operator">&lt;</span><span class="token keyword">object</span><span class="token operator">></span> commandArgs<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Execute command</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="2-registering-your-view-manager"></a><a href="#2-registering-your-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Registering your View Manager</h4>
<p>As with native modules, we want to register our new <code>CustomUserControlViewManager</code> with React Native so we can actually use it. To do this, first we're going to create a <code>ReactPackageProvider</code> which implements <a href="../Microsoft.ReactNative/IReactPackageProvider.idl">Microsoft.ReactNative.IReactPackageProvider</a>.</p>
<p><em>ReactPackageProvider.cs</em></p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>Managed<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> ViewManagerSample
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">ReactPackageProvider</span> <span class="token punctuation">:</span> <span class="token class-name">IReactPackageProvider</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">CreatePackage</span><span class="token punctuation">(</span><span class="token class-name">IReactPackageBuilder</span> packageBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      packageBuilder<span class="token punctuation">.</span><span class="token function">AddViewManagers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Here we've implemented the <code>CreatePackage</code> method, which receives <code>packageBuilder</code> to build contents of the package. Since we use reflection to discover and bind native module, we call <code>AddViewManagers</code> extension method to register all the view managers in our assembly.</p>
<p>Now that we have the <code>ReactPackageProvider</code>, it's time to register it within our <code>ReactApplication</code>. We do that by simply adding the proviver to the <code>PackageProviders</code> property.</p>
<p><em>App.xaml.cs</em></p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> SampleApp
<span class="token punctuation">{</span>
    <span class="token keyword">sealed</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">:</span> <span class="token class-name">ReactApplication</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">/* Other Init Code */</span>

            PackageProviders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>Managed<span class="token punctuation">.</span>ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Includes any modules in this project</span>
            PackageProviders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ViewManagerSample<span class="token punctuation">.</span>ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">/* Other Init Code */</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This example assumes that the <code>ViewManagerSample.ReactPackageProvider</code> we created above is in a different project (assembly) than our application. However you'll notice that by default we also added a <code>Microsoft.ReactNative.Managed.ReactPackageProvider</code>.</p>
<p>The <code>Microsoft.ReactNative.Managed.ReactPackageProvider</code> is a convenience that makes sure that all native modules and view managers defined within the app project automatically get registered. So if you're creating your view managers directly within the app project, you won't actually want to define a separate <code>ReactPackageProvider</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="3-using-your-view-manager-in-jsx"></a><a href="#3-using-your-view-manager-in-jsx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Using your View Manager in JSX</h4>
<p><em>ViewManagerSample.js</em></p>
<pre><code class="hljs css language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  AppRegistry<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  requireNativeComponent<span class="token punctuation">,</span>
  StyleSheet<span class="token punctuation">,</span>
  UIManager<span class="token punctuation">,</span>
  View
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> CustomUserControl <span class="token operator">=</span> <span class="token function">requireNativeComponent</span><span class="token punctuation">(</span><span class="token string">"CustomUserControl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ViewManagerSample</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">onPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_customControlRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token function">findNodeHandle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_customControlRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
      UIManager<span class="token punctuation">.</span><span class="token function">dispatchViewManagerCommand</span><span class="token punctuation">(</span>
        tag<span class="token punctuation">,</span>
        UIManager<span class="token punctuation">.</span><span class="token function">getViewManagerConfig</span><span class="token punctuation">(</span><span class="token string">"CustomUserControl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Commands
          <span class="token punctuation">.</span>CustomCommand<span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">"arg1"</span><span class="token punctuation">,</span> <span class="token string">"arg2"</span><span class="token punctuation">]</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CustomUserControl</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>customcontrol<span class="token punctuation">}</span></span>
          <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>CustomUserControl!<span class="token punctuation">"</span></span>
          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">ref</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_customControlRef <span class="token operator">=</span> ref<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
          <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Call CustomUserControl Commands!<span class="token punctuation">"</span></span>
        <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token punctuation">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
    alignItems<span class="token punctuation">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">"#F5FCFF"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  customcontrol<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">"#006666"</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    margin<span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent</span><span class="token punctuation">(</span><span class="token string">"ViewManagerSample"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ViewManagerSample<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="sample-viewmanager-c-1"></a><a href="#sample-viewmanager-c-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample ViewManager (C++)</h2>
<p>For this sample, assume we already have the <code>CustomUserControl</code> defined in the C# example.</p>
<h4><a class="anchor" aria-hidden="true" id="1-authoring-your-view-manager-1"></a><a href="#1-authoring-your-view-manager-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Authoring your View Manager</h4>
<p>Here is a sample view manager written in C++ called <code>CustomUserControlViewManager</code>.</p>
<p><em>CustomUserControlViewManager.h</em></p>
<pre><code class="hljs css language-c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"winrt/Microsoft.ReactNative.Bridge.h"</span></span>

<span class="hljs-keyword">namespace</span> winrt::ViewManagerSample::implementation {

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CustomUserControlViewManager</span> :</span> winrt::implements&lt;
                                             CustomUserControlViewManager,
                                             winrt::Microsoft::ReactNative::<span class="hljs-built_in">Bridge</span>::IViewManager,
                                             winrt::Microsoft::ReactNative::<span class="hljs-built_in">Bridge</span>::IViewManagerWithNativeProperties,
                                             winrt::Microsoft::ReactNative::<span class="hljs-built_in">Bridge</span>::IViewManagerWithCommands&gt; {
 <span class="hljs-keyword">public</span>:
  CustomUserControlViewManager() = <span class="hljs-keyword">default</span>;

  <span class="hljs-comment">// IViewManager</span>
  winrt::<span class="hljs-function">hstring <span class="hljs-title">Name</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span></span>;

  winrt::Windows::UI::Xaml::<span class="hljs-function">FrameworkElement <span class="hljs-title">CreateView</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span></span>;

  <span class="hljs-comment">// IViewManagerWithNativeProperties</span>
  winrt::Windows::Foundation::Collections::
      IMapView&lt;winrt::hstring, winrt::Microsoft::ReactNative::<span class="hljs-built_in">Bridge</span>::ViewManagerPropertyType&gt;
      NativeProps() <span class="hljs-keyword">noexcept</span>;

  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">UpdateProperties</span><span class="hljs-params">(
      winrt::Windows::UI::Xaml::FrameworkElement <span class="hljs-keyword">const</span> &amp;view,
      winrt::Windows::Foundation::Collections::IMapView&lt;winrt::hstring, winrt::Windows::Foundation::IInspectable&gt; <span class="hljs-keyword">const</span>
          &amp;propertyMap)</span></span>;

   <span class="hljs-comment">// IViewManagerWithCommands</span>
  winrt::Windows::Foundation::Collections::IMapView&lt;winrt::hstring, <span class="hljs-keyword">int64_t</span>&gt; Commands() <span class="hljs-keyword">noexcept</span>;

  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DispatchCommand</span><span class="hljs-params">(
          winrt::Windows::UI::Xaml::FrameworkElement <span class="hljs-keyword">const</span> &amp;view,
          <span class="hljs-keyword">int64_t</span> commandId,
          winrt::Windows::Foundation::Collections::IVectorView&lt;winrt::Windows::Foundation::IInspectable&gt; commandArgs)</span> <span class="hljs-keyword">noexcept</span></span>;
};

}
</code></pre>
<p><em>CustomUserControlViewManager.cpp</em></p>
<pre><code class="hljs css language-c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"pch.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"CustomUserControlViewManager.h"</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> winrt;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Microsoft::ReactNative::<span class="hljs-built_in">Bridge</span>;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Windows::Foundation;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Windows::Foundation::Collections;

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Windows::UI::Xaml;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Windows::UI::Xaml::Media;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Windows::UI::Xaml::Controls;

<span class="hljs-keyword">namespace</span> winrt::ViewManagerSample::implementation {

<span class="hljs-comment">// IViewManager</span>
hstring CustomUserControlViewManager::Name() <span class="hljs-keyword">noexcept</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">L"CustomUserControl"</span>;
}

FrameworkElement CustomUserControlViewManager::CreateView() <span class="hljs-keyword">noexcept</span> {
  <span class="hljs-keyword">return</span> winrt::ViewManagerSample::CustomUserControl();
}

<span class="hljs-comment">// IViewManagerWithNativeProperties</span>
IMapView&lt;hstring, ViewManagerPropertyType&gt; CustomUserControlViewManager::NativeProps() <span class="hljs-keyword">noexcept</span> {
  <span class="hljs-keyword">auto</span> nativeProps = winrt::single_threaded_map&lt;hstring, ViewManagerPropertyType&gt;();

  nativeProps.Insert(<span class="hljs-string">L"label"</span>, ViewManagerPropertyType::<span class="hljs-keyword">String</span>);
  nativeProps.Insert(<span class="hljs-string">L"color"</span>, ViewManagerPropertyType::Color);
  nativeProps.Insert(<span class="hljs-string">L"backgroundColor"</span>, ViewManagerPropertyType::Color);

  <span class="hljs-keyword">return</span> nativeProps.GetView();
}

<span class="hljs-keyword">void</span> CustomUserControlViewManager::UpdateProperties(
    FrameworkElement <span class="hljs-keyword">const</span> &amp;view,
    IMapView&lt;hstring, IInspectable&gt; <span class="hljs-keyword">const</span> &amp;propertyMap) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> control = view.try_as&lt;winrt::ViewManagerSample::CustomUserControl&gt;()) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> <span class="hljs-keyword">const</span> &amp;pair : propertyMap) {
      <span class="hljs-keyword">auto</span> <span class="hljs-keyword">const</span> &amp;propertyName = pair.Key();
      <span class="hljs-keyword">auto</span> <span class="hljs-keyword">const</span> &amp;propertyValue = pair.Value();

      <span class="hljs-keyword">if</span> (propertyName == <span class="hljs-string">L"label"</span>) {
        <span class="hljs-keyword">if</span> (propertyValue != <span class="hljs-literal">nullptr</span>) {
          <span class="hljs-keyword">auto</span> value = winrt::unbox_value&lt;hstring&gt;(propertyValue);
          control.SetValue(winrt::ViewManagerSample::CustomUserControl::LabelProperty(), propertyValue);
        } <span class="hljs-keyword">else</span> {
          control.ClearValue(winrt::ViewManagerSample::CustomUserControl::LabelProperty());
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propertyName == <span class="hljs-string">L"color"</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> value = propertyValue.try_as&lt;Brush&gt;()) {
          control.SetValue(Control::ForegroundProperty(), propertyValue);
        } <span class="hljs-keyword">else</span> {
          control.ClearValue(Control::ForegroundProperty());
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propertyName == <span class="hljs-string">L"backgroundColor"</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> value = propertyValue.try_as&lt;Brush&gt;()) {
          control.SetValue(Control::BackgroundProperty(), propertyValue);
        } <span class="hljs-keyword">else</span> {
          control.ClearValue(Control::BackgroundProperty());
        }
      }
    }
  }
}

<span class="hljs-comment">// IViewManagerWithCommands</span>
IMapView&lt;hstring, <span class="hljs-keyword">int64_t</span>&gt; CustomUserControlViewManager::Commands() <span class="hljs-keyword">noexcept</span> {
    <span class="hljs-keyword">auto</span> commands = winrt::single_threaded_map&lt;hstring, <span class="hljs-keyword">int64_t</span>&gt;();
    commands.Insert(<span class="hljs-string">L"CustomCommand"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> commands.GetView();
}

<span class="hljs-keyword">void</span> CustomUserControlViewManager::DispatchCommand(
    FrameworkElement <span class="hljs-keyword">const</span> &amp;view,
    <span class="hljs-keyword">int64_t</span> commandId,
    IVectorView&lt;IInspectable&gt; commandArgs) <span class="hljs-keyword">noexcept</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> control = view.try_as&lt;winrt::SampleLibraryCPP::CustomUserControlCPP&gt;()) {
    <span class="hljs-keyword">if</span> (commandId == <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// Execute command</span>
    }
  }
}

}

</code></pre>
<h4><a class="anchor" aria-hidden="true" id="2-registering-your-view-manager-1"></a><a href="#2-registering-your-view-manager-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Registering your View Manager</h4>
<p>As with native modules, we want to register our new <code>CustomUserControlViewManager</code> with React Native so we can actually use it. To do this, first we're going to create a <code>ReactPackageProvider</code> which implements <a href="../Microsoft.ReactNative/IReactPackageProvider.idl">Microsoft.ReactNative.IReactPackageProvider</a>.</p>
<p><em>ReactPackageProvider.idl</em></p>
<pre><code class="hljs css language-c++"><span class="hljs-keyword">namespace</span> ViewManagerSample {

runtimeclass ReactPackageProvider : Microsoft.ReactNative.IReactPackageProvider
{
  ReactPackageProvider();
};

}
</code></pre>
<p>After that we add the .h and.cpp files:</p>
<p><em>ReactPackageProvider.h</em></p>
<pre><code class="hljs css language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.g.h"</span></span>

<span class="token keyword">namespace</span> winrt<span class="token operator">::</span>ViewManagerSample<span class="token operator">::</span>implementation <span class="token punctuation">{</span>

<span class="token keyword">struct</span> <span class="token class-name">ReactPackageProvider</span> <span class="token operator">:</span> ReactPackageProviderT<span class="token operator">&lt;</span>ReactPackageProvider<span class="token operator">></span>
<span class="token punctuation">{</span>
  <span class="token function">ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">CreatePackage</span><span class="token punctuation">(</span>Microsoft<span class="token operator">::</span>ReactNative<span class="token operator">::</span>IReactPackageBuilder <span class="token keyword">const</span><span class="token operator">&amp;</span> packageBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token comment">// namespace winrt::ViewManagerSample::implementation</span>

<span class="token keyword">namespace</span> winrt<span class="token operator">::</span>ViewManagerSample<span class="token operator">::</span>factory_implementation <span class="token punctuation">{</span>

<span class="token keyword">struct</span> <span class="token class-name">ReactPackageProvider</span> <span class="token operator">:</span> ReactPackageProviderT<span class="token operator">&lt;</span>
                                     ReactPackageProvider<span class="token punctuation">,</span>
                                     implementation<span class="token operator">::</span>ReactPackageProvider<span class="token operator">></span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token comment">// namespace winrt::ViewManagerSample::factory_implementation</span>
</code></pre>
<p><em>ReactPackageProvider.cpp</em></p>
<pre><code class="hljs css language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.g.cpp"</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CustomUserControlViewManager.h"</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token operator">::</span>Microsoft<span class="token operator">::</span>ReactNative<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> Microsoft<span class="token operator">::</span>ReactNative<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> winrt<span class="token operator">::</span>ViewManagerSample<span class="token operator">::</span>implementation <span class="token punctuation">{</span>

<span class="token keyword">void</span> ReactPackageProvider<span class="token operator">::</span><span class="token function">CreatePackage</span><span class="token punctuation">(</span>IReactPackageBuilder <span class="token keyword">const</span><span class="token operator">&amp;</span> packageBuilder<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  packageBuilder<span class="token punctuation">.</span><span class="token function">AddViewManager</span><span class="token punctuation">(</span>
      L<span class="token string">"CustomUserControlViewManager"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> winrt<span class="token operator">::</span>make<span class="token operator">&lt;</span>CustomUserControlViewManager<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token comment">// namespace winrt::ViewManagerSample::implementation</span>

</code></pre>
<p>Here we've implemented the <code>CreatePackage</code> method, which receives <code>packageBuilder</code> to build contents of the package. And then we call <code>AddViewManager</code> with the name of our view manager and a lambda which returns an instance of the view manager.</p>
<p>Now that we have the <code>ReactPackageProvider</code>, it's time to register it within our <code>ReactApplication</code>. We do that by simply adding the proviver to the <code>PackageProviders</code> property.</p>
<p><em>App.cpp</em></p>
<pre><code class="hljs css language-c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"pch.h"</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"App.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"ReactPackageProvider.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"winrt/ViewManagerSample.h"</span></span>

<span class="hljs-keyword">namespace</span> winrt::SampleApp::implementation {

App::App() <span class="hljs-keyword">noexcept</span> {
  <span class="hljs-comment">/* Other Init Code */</span>

  PackageProviders().Append(make&lt;ReactPackageProvider&gt;()); <span class="hljs-comment">// Includes all modules in this project</span>
  PackageProviders().Append(winrt::ViewManagerSample::ReactPackageProvider());

  <span class="hljs-comment">/* Other Init Code */</span>
}

} <span class="hljs-comment">// namespace winrt::SampleApp::implementation</span>
</code></pre>
<p>This example assumes that the <code>ViewManagerSample::ReactPackageProvider</code> we created above is in a different project (assembly) than our application. However you'll notice that by default we also added a <code>SampleApp::ReactPackageProvider</code>.</p>
<p>The <code>SampleApp::ReactPackageProvider</code> is a convenience that makes sure that all native modules and view managers defined within the app project automatically get registered. So if you're creating your native modules directly within the app project, you won't actually want to define a separate <code>ReactPackageProvider</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="3-using-your-view-manager-in-jsx-1"></a><a href="#3-using-your-view-manager-in-jsx-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Using your View Manager in JSX</h4>
<p><em>ViewManagerSample.js</em></p>
<pre><code class="hljs css language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  AppRegistry<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  requireNativeComponent<span class="token punctuation">,</span>
  StyleSheet<span class="token punctuation">,</span>
  UIManager<span class="token punctuation">,</span>
  View
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> CustomUserControl <span class="token operator">=</span> <span class="token function">requireNativeComponent</span><span class="token punctuation">(</span><span class="token string">"CustomUserControl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ViewManagerSample</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">onPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_customControlRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token function">findNodeHandle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_customControlRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
      UIManager<span class="token punctuation">.</span><span class="token function">dispatchViewManagerCommand</span><span class="token punctuation">(</span>
        tag<span class="token punctuation">,</span>
        UIManager<span class="token punctuation">.</span><span class="token function">getViewManagerConfig</span><span class="token punctuation">(</span><span class="token string">"CustomUserControl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Commands
          <span class="token punctuation">.</span>CustomCommand<span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">"arg1"</span><span class="token punctuation">,</span> <span class="token string">"arg2"</span><span class="token punctuation">]</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CustomUserControl</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>customcontrol<span class="token punctuation">}</span></span>
          <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>CustomUserControl!<span class="token punctuation">"</span></span>
          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">ref</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_customControlRef <span class="token operator">=</span> ref<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
          <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Call CustomUserControl Commands!<span class="token punctuation">"</span></span>
        <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token punctuation">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
    alignItems<span class="token punctuation">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">"#F5FCFF"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  customcontrol<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">"#006666"</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    margin<span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent</span><span class="token punctuation">(</span><span class="token string">"ViewManagerSample"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ViewManagerSample<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#initial-setup">Initial Setup</a></li><li><a href="#sample-viewmanager-c">Sample ViewManager (C#)</a><ul class="toc-headings"><li><a href="#attributes">Attributes</a></li></ul></li><li><a href="#sample-viewmanager-c-1">Sample ViewManager (C++)</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>React Native Docs</h5><a href="http://facebook.github.io/react-native/docs/getting-started.html">Getting Started</a><a href="http://facebook.github.io/react-native/docs/tutorial.html">Tutorial</a><a href="http://facebook.github.io/react-native/docs/components-and-apis.html">Components and APIs</a><a href="http://facebook.github.io/react-native/docs/more-resources.html">More Resources</a></div><div><h5>React Native for Windows Docs</h5><a href="/react-native-windows/docs/getting-started">Getting Started</a><a href="/react-native-windows/docs/parity-status">API parity with React Native</a><a href="/react-native-windows/docs/native-modules">Native Modules</a><a href="/react-native-windows/docs/view-managers">Native UI Components</a><a href="/react-native-windows/docs/windowsbrush-and-theme">Windows Brushes and Themes</a></div><div><h5>More Resources</h5><a href="/react-native-windows/blog/">Blog</a><a href="https://twitter.com/reactwindows" target="_blank">Twitter</a><a href="https://github.com/microsoft/react-native-windows" target="_blank">GitHub</a><a href="https://github.com/microsoft/react-native-windows-samples/tree/master/samples" target="_blank">Samples</a></div></section></footer></div></body></html>