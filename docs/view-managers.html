<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Native UI Components · React Native for Windows</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="![Architecture](https://img.shields.io/badge/architecture-old_only-yellow)"/><meta name="docsearch:version" content="0.80"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Native UI Components · React Native for Windows"/><meta property="og:type" content="website"/><meta property="og:url" content="https://microsoft.github.io/react-native-windows/"/><meta property="og:description" content="![Architecture](https://img.shields.io/badge/architecture-old_only-yellow)"/><meta property="og:image" content="https://microsoft.github.io/react-native-windows/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://microsoft.github.io/react-native-windows/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-native-windows/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="stylesheet" href="/react-native-windows/css/code-block-buttons.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/react-native-windows/js/code-block-buttons.js"></script><script type="text/javascript" src="/react-native-windows/js/nav-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/react-native-windows/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-native-windows/css/prism.css"/><link rel="stylesheet" href="/react-native-windows/css/main.css"/><script src="/react-native-windows/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-windows/"><img class="logo" src="/react-native-windows/img/header_logo.svg" alt="React Native for Windows"/><h2 class="headerTitleWithLogo">React Native for Windows</h2></a><a href="/react-native-windows/versions"><h3>0.80</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/react-native-windows/docs/getting-started" target="_self">Docs</a></li><li class=""><a href="/react-native-windows/docs/flyout-component" target="_self">APIs</a></li><li class=""><a href="https://devblogs.microsoft.com/react-native/" target="_self">Blog</a></li><li class=""><a href="/react-native-windows/resources" target="_self">Resources</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples" target="_self">Samples</a></li><li class=""><a href="/react-native-windows/support" target="_self">Support</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Native Modules</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">The Basics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/getting-started">Get Started with Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/rnw-dependencies">System Requirements</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/react-native-windows-cli">React Native Windows CLI</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/parity-status">React Native Windows Components and APIs</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/config">React Native Config Schema</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/windowsbrush-and-theme">Using PlatformColor and Responding to Themes</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/releases">Release Strategy</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/platform">Platform Detection</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/upgrade-app">Upgrading App to Latest Version of React Native Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/migration-guide">Migration Guide</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/setup-ci">Setup Continuous Integration Pipeline for an RNW App</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/app-publishing">Publishing a React Native Windows App to the Microsoft Store</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/supported-community-modules">Supported Community Modules</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">CLI Commands<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/autolink-windows-cli">react-native autolink-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/codegen-windows-cli">react-native codegen-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/init-windows-cli">react-native init-windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/run-windows-cli">react-native run-windows</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Native Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-platform">Overview</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-platform-getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-platform-modules">Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-platform-components">Native Components (Fabric)</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-platform-components-paper">Native Components (Paper)</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-platform-using">Using Native Libraries</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced Topics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/win10-vm">Developing Windows apps on a non-Windows PC</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/hermes">Hermes on Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/NuGet">Using Microsoft.ReactNative NuGet packages</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Troubleshooting<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/debugging-javascript">JavaScript Debugging</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/metro-config-out-tree-platforms">Metro config for out of tree platforms</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Legacy Docs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Native Modules</h4><ul><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules">Native Modules</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/react-native-windows/docs/view-managers">Native UI Components</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-setup">Native Module Setup</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-vs-turbo-modules">Native Modules vs Turbo Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-using">Using Community Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-autolinking">Autolinking Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-advanced">Native Modules (Advanced)</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-troubleshooting">Troubleshooting Native Modules</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Native Development</h4><ul><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-code">Working with native code on Windows</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-code-language-choice">Choosing C++ or C# for native code</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-marshalling-data">Marshaling Data</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-async">Using Asynchronous Windows APIs</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-jsvalue">Using JSValue</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/native-modules-csharp-codegen">Compile time code generation for C#</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/customizing-SDK-versions">Customizing SDK versions</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/docs/managing-cpp-deps">Managing C++ dependencies</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/microsoft/react-native-windows-samples/blob/main/docs/view-managers.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Native UI Components</h1></header><article><div><span><p><img src="https://img.shields.io/badge/architecture-old_only-yellow" alt="Architecture"></p>
<blockquote>
<p><strong>Old Architecture Only:</strong> This documentation describes a feature only supported by React Native's &quot;Old&quot; or &quot;Legacy&quot; Architecture. We are still in the progress of updating all of the documentation, but in the meantime, for information on React Native architectures in React Native Windows, see <a href="/react-native-windows/docs/new-architecture">New vs. Old Architecture</a>.</p>
</blockquote>
<blockquote>
<p><strong>This documentation and the underlying platform code is a work in progress.</strong>
<strong>Examples (C# and C++/WinRT):</strong></p>
<ul>
<li><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples/NativeModuleSample">Native Module Sample in <code>microsoft/react-native-windows-samples</code></a></li>
<li><a href="https://github.com/microsoft/react-native-windows/tree/main/packages/sample-apps">Sample App in <code>microsoft/react-native-windows/packages/microsoft-reactnative-sampleapps</code></a></li>
</ul>
</blockquote>
<p>There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like <code>ScrollView</code> and <code>TextInput</code>, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.</p>
<p>Like the <a href="/react-native-windows/docs/native-modules">native module guide</a>, this too is a more advanced guide that assumes you are somewhat familiar with UWP programming. This guide will show you how to build a native UI component, walking you through the implementation of a subset of the existing <code>ImageView</code> component available in the core React Native library.</p>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>Similarly to authoring native modules, at a high level you must:</p>
<ol>
<li>Author a view manager which defines a new Component type and understands how to create and interact with the native UI widget.</li>
<li>Register your new view manager within the native code of your React Native host application.</li>
<li>Reference the new component within your React Native JSX code.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="note-about-uwp-xaml-controls"></a><a href="#note-about-uwp-xaml-controls" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Note about UWP XAML controls</h3>
<p>Some UWP XAML controls do not support being hosted in environments where 3D transforms are involved (i.e. the <a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.xaml.uielement.transform3d"><code>Transform3D</code></a> property is set on the control or on any of the control's ancestors in the XAML tree).</p>
<p>Currently, React Native for Windows uses a global <code>PerspectiveTransform</code> to provide a 3D look to objects being rotated along the <code>x</code> or <code>y</code> axes, which means these controls that do not work in 3D environments, will not work out of the box (e.g. <a href="https://docs.microsoft.com/en-us/uwp/api/Windows.UI.Xaml.Controls.InkCanvas"><code>InkCanvas</code></a>). However, a React Native for Windows app can opt out of the 3D perspective (and in so doing, enable using these controls) by setting the <a href="https://github.com/microsoft/react-native-windows/blob/4e775b9a59c55996d7598aadaeb82c93c40cbb6f/vnext/Microsoft.ReactNative/ReactRootView.idl#L18"><code>IsPerspectiveEnabled</code></a> property on the <code>ReactRootView</code>.</p>
<p><strong>Important</strong>: The <code>IsPerspectiveEnabled</code> property is experimental and support for it may be removed in the future.</p>
<h2><a class="anchor" aria-hidden="true" id="initial-setup"></a><a href="#initial-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initial Setup</h2>
<p>Prerequisite: Follow the <a href="/react-native-windows/docs/native-modules-setup">Native Modules Setup Guide</a> to create the Visual Studio infrastructure to author your own stand-alone native module for React Native Windows</p>
<p>Once you have set up your development environment and project structure, you are ready to write code.</p>
<p>If you are only planning on adding a native module to your existing React Native Windows app, i.e.:</p>
<ol>
<li>You followed <a href="/react-native-windows/docs/getting-started">Getting Started</a>, where</li>
<li>You used the <a href="/react-native-windows/docs/init-windows-cli">init-windows command</a> to add Windows to your project, and</li>
<li>You are just adding your native code to the app project under the <code>windows</code> folder.</li>
</ol>
<p>Then you can simply open the Visual Studio solution in the <code>windows</code> folder and add the new files directly to the app project.</p>
<p>If you are instead creating a standalone native module, or adding Windows support to an existing native module, check out the <a href="/react-native-windows/docs/native-modules-setup">Native Modules Setup</a> guide first.</p>
<h2><a class="anchor" aria-hidden="true" id="sample-view-manager"></a><a href="#sample-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample view manager</h2>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-56-tab-57" class="nav-link active" data-group="group_56" data-tab="tab-group-56-content-57">C#</div><div id="tab-group-56-tab-58" class="nav-link" data-group="group_56" data-tab="tab-group-56-content-58">C++</div></div><div class="tab-content"><div id="tab-group-56-content-57" class="tab-pane active" data-group="group_56" tabindex="-1"><div><span><h3><a class="anchor" aria-hidden="true" id="attributes"></a><a href="#attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attributes</h3>
<table>
<thead>
<tr><th>Attribute</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td><code>ViewManagerExportedViewConstant</code></td><td>Specifies a field or property that represents a constant.</td></tr>
<tr><td><code>ViewManagerProperty</code></td><td>Specifies a method to be called to set a property on an instance of a native UI widget.</td></tr>
<tr><td><code>ViewManagerCommand</code></td><td>Specifies a method that can be called on an instance of a native UI widget.</td></tr>
</tbody>
</table>
<p>For this sample, assume we have the following <code>CustomUserControl</code> that we want to use in React Native.</p>
<p><code>CustomUserControl.cs</code>:</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> <span class="token namespace">Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml</span><span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token namespace">Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">.</span>Controls</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> <span class="token namespace">ViewManagerSample</span><br /><span class="token punctuation">{</span><br />    <span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserControl</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Control</span></span><br />    <span class="token punctuation">{</span><br />        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">DependencyProperty</span> LabelProperty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><br /><br />        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Label<br />        <span class="token punctuation">{</span><br />            <span class="token keyword">get</span><br />            <span class="token punctuation">{</span><br />                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token function">GetValue</span><span class="token punctuation">(</span>LabelProperty<span class="token punctuation">)</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />            <span class="token keyword">set</span><br />            <span class="token punctuation">{</span><br />                <span class="token function">SetValue</span><span class="token punctuation">(</span>LabelProperty<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />        <span class="token punctuation">}</span><br /><br />        <span class="token keyword">static</span> <span class="token function">CustomUserControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            LabelProperty <span class="token operator">=</span> DependencyProperty<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span><br />                <span class="token keyword">nameof</span><span class="token punctuation">(</span>Label<span class="token punctuation">)</span><span class="token punctuation">,</span><br />                <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />                <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CustomUserControl</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PropertyMetadata</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><br />                <span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span><br /><br />        <span class="token keyword">public</span> <span class="token function">CustomUserControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            DefaultStyleKey <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CustomUserControl</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span><br />    <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /></code></pre>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ResourceDictionary</span><br />    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><br />    <span class="hljs-attr">xmlns:x</span>=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span><br />    <span class="hljs-attr">xmlns:local</span>=<span class="hljs-string">"using:ViewManagerSample"</span>&gt;</span><br /><br />    <span class="hljs-tag">&lt;<span class="hljs-name">Style</span> <span class="hljs-attr">TargetType</span>=<span class="hljs-string">"local:CustomUserControl"</span> &gt;</span><span class="xml"><br />        <span class="hljs-tag">&lt;<span class="hljs-name">Setter</span> <span class="hljs-attr">Property</span>=<span class="hljs-string">"Template"</span>&gt;</span><br />            <span class="hljs-tag">&lt;<span class="hljs-name">Setter.Value</span>&gt;</span><br />                <span class="hljs-tag">&lt;<span class="hljs-name">ControlTemplate</span> <span class="hljs-attr">TargetType</span>=<span class="hljs-string">"local:CustomUserControl"</span>&gt;</span><br />                    <span class="hljs-tag">&lt;<span class="hljs-name">Border</span><br />                        <span class="hljs-attr">Background</span>=<span class="hljs-string">"{TemplateBinding Background}"</span><br />                        <span class="hljs-attr">BorderBrush</span>=<span class="hljs-string">"{TemplateBinding BorderBrush}"</span><br />                        <span class="hljs-attr">BorderThickness</span>=<span class="hljs-string">"{TemplateBinding BorderThickness}"</span>&gt;</span><br />                        <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"{TemplateBinding Foreground}"</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"{TemplateBinding Label}"</span> <span class="hljs-attr">TextAlignment</span>=<span class="hljs-string">"Center"</span> /&gt;</span><br />                    <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span><br />                <span class="hljs-tag">&lt;/<span class="hljs-name">ControlTemplate</span>&gt;</span><br />            <span class="hljs-tag">&lt;/<span class="hljs-name">Setter.Value</span>&gt;</span><br />        <span class="hljs-tag">&lt;/<span class="hljs-name">Setter</span>&gt;</span><br />    </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span><br /><span class="hljs-tag">&lt;/<span class="hljs-name">ResourceDictionary</span>&gt;</span><br /></code></pre>
<h3><a class="anchor" aria-hidden="true" id="1-authoring-your-view-manager"></a><a href="#1-authoring-your-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Authoring your View Manager</h3>
<p>Here is a sample view manager written in C# called <code>CustomUserControlViewManager</code>.</p>
<p><code>CustomUserControlViewManager.cs</code>:</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> <span class="token namespace">Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">.</span>Media</span><span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token namespace">Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Xaml<span class="token punctuation">.</span>Controls</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>Managed</span><span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> <span class="token namespace">ViewManagerSample</span><br /><span class="token punctuation">{</span><br />    <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserControlViewManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AttributedViewManager<span class="token punctuation">&lt;</span>CustomUserControl<span class="token punctuation">></span></span></span><br />    <span class="token punctuation">{</span><br />        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ViewManagerProperty</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"label"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br />        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLabel</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span><br />            <span class="token punctuation">{</span><br />                view<span class="token punctuation">.</span>Label <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />            <span class="token keyword">else</span><br />            <span class="token punctuation">{</span><br />                view<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>CustomUserControl<span class="token punctuation">.</span>LabelProperty<span class="token punctuation">)</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />        <span class="token punctuation">}</span><br /><br />        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ViewManagerProperty</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br />        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> <span class="token class-name">Brush</span> <span class="token keyword">value</span><span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span><br />            <span class="token punctuation">{</span><br />                view<span class="token punctuation">.</span>Foreground <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />            <span class="token keyword">else</span><br />            <span class="token punctuation">{</span><br />                view<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>Control<span class="token punctuation">.</span>ForegroundProperty<span class="token punctuation">)</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />        <span class="token punctuation">}</span><br /><br />        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ViewManagerProperty</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"backgroundColor"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><br />        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetBackgroundColor</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> <span class="token class-name">Brush</span> <span class="token keyword">value</span><span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">value</span><span class="token punctuation">)</span><br />            <span class="token punctuation">{</span><br />                view<span class="token punctuation">.</span>Background <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />            <span class="token keyword">else</span><br />            <span class="token punctuation">{</span><br />                view<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>Control<span class="token punctuation">.</span>BackgroundProperty<span class="token punctuation">)</span><span class="token punctuation">;</span><br />            <span class="token punctuation">}</span><br />        <span class="token punctuation">}</span><br /><br />        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ViewManagerCommand</span></span><span class="token punctuation">]</span><br />        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CustomCommand</span><span class="token punctuation">(</span><span class="token class-name">CustomUserControl</span> view<span class="token punctuation">,</span> <span class="token class-name">IReadOnlyList<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">></span></span> commandArgs<span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            <span class="token comment">// Execute command</span><br />        <span class="token punctuation">}</span><br />    <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /></code></pre>
<h3><a class="anchor" aria-hidden="true" id="2-registering-your-view-manager"></a><a href="#2-registering-your-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Registering your View Manager</h3>
<p>As with native modules, we want to register our new <code>CustomUserControlViewManager</code> with React Native so we can actually use it. To do this, first we're going to create a <code>ReactPackageProvider</code> which implements <a href="https://github.com/microsoft/react-native-windows/blob/main/vnext/Microsoft.ReactNative/IReactPackageProvider.idl"><code>Microsoft.ReactNative.IReactPackageProvider</code></a>.</p>
<p><code>ReactPackageProvider.cs</code>:</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>Managed</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> <span class="token namespace">ViewManagerSample</span><br /><span class="token punctuation">{</span><br />    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">ReactPackageProvider</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReactPackageProvider</span></span><br />    <span class="token punctuation">{</span><br />        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreatePackage</span><span class="token punctuation">(</span><span class="token class-name">IReactPackageBuilder</span> packageBuilder<span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            <span class="token function">CreatePackageImplementation</span><span class="token punctuation">(</span>packageBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span><br /><br />        <span class="token comment">/// &lt;summary></span><br />        <span class="token comment">/// This method is implemented by the C# code generator</span><br />        <span class="token comment">/// &lt;/summary></span><br />        <span class="token keyword">partial</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreatePackageImplementation</span><span class="token punctuation">(</span><span class="token class-name">IReactPackageBuilder</span> packageBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /></code></pre>
<p>Here we've implemented the <code>CreatePackage</code> method, which receives <code>packageBuilder</code> to build contents of the package.</p>
<p>Now that we have the <code>ReactPackageProvider</code>, it's time to register it within our <code>ReactApplication</code>. We do that by simply adding the provider to the <code>PackageProviders</code> property.</p>
<p><code>App.xaml.cs</code>:</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>ReactNative</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> <span class="token namespace">SampleApp</span><br /><span class="token punctuation">{</span><br />    <span class="token keyword">sealed</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ReactApplication</span></span><br />    <span class="token punctuation">{</span><br />        <span class="token keyword">public</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br />        <span class="token punctuation">{</span><br />            <span class="token comment">/* Other Init Code */</span><br /><br />            PackageProviders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>Managed<span class="token punctuation">.</span>ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Includes any modules in this project</span><br />            PackageProviders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ViewManagerSample<span class="token punctuation">.</span>ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />            <span class="token comment">/* Other Init Code */</span><br />        <span class="token punctuation">}</span><br />    <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /></code></pre>
<p>This example assumes that the <code>ViewManagerSample.ReactPackageProvider</code> we created above is in a different project (assembly) than our application. However you'll notice that by default we also added a <code>Microsoft.ReactNative.Managed.ReactPackageProvider</code>.</p>
<p>The <code>Microsoft.ReactNative.Managed.ReactPackageProvider</code> is a convenience that makes sure that all native modules and view managers defined within the app project automatically get registered. So if you're creating your view managers directly within the app project, you won't actually want to define a separate <code>ReactPackageProvider</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="more-extensibility-points"></a><a href="#more-extensibility-points" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More extensibility points</h3>
<ul>
<li>In some scenarios, a view manager might need to have more context at view creation time in order to decide what kind of control to instantiate.
This can be achieved by having the view manager implement the <a href="IViewManagerCreateWithProperties"><code>IViewManagerCreateWithProperties</code></a> interface. The <code>CreateViewWithProperties</code> method can then access the properties set in JSX by inspecting the <code>propertyMapReader</code>.</li>
</ul>
<pre><code class="hljs css language-diff"><span class="hljs-deletion">-internal class CustomUserControlViewManager : AttributedViewManager&lt;CustomUserControl&gt; {</span><br /><span class="hljs-addition">+internal class CustomUserControlViewManager : AttributedViewManager&lt;CustomUserControl&gt;, IViewManagerCreateWithProperties {</span><br />// rest of the view manager goes here...<br /><span class="hljs-addition">+  // IViewManagerCreateWithProperties</span><br /><span class="hljs-addition">+  public virtual object CreateViewWithProperties(Microsoft.ReactNative.IJSValueReader propertyMapReader) {</span><br /><span class="hljs-addition">+    propertyMapReader.ReaderValue(out IDictionary&lt;string, JSValue&gt; propertyMap);</span><br /><span class="hljs-addition">+    // create a XAML FrameworkElement based on properties in propertyMap</span><br /><span class="hljs-addition">+    if (propertyMap.ContainsKey("foo)) { </span><br /><span class="hljs-addition">+      return new Button(); </span><br /><span class="hljs-addition">+    } else {</span><br /><span class="hljs-addition">+      return new TextBox();</span><br /><span class="hljs-addition">+    }</span><br /><span class="hljs-addition">+  }</span><br />}<br /><span class="hljs-addition">+}</span><br /></code></pre>
<ul>
<li>Your view manager is also able to declare that it wants to be responsible for its own sizing and layout.
This is useful in scenarios where you are wrapping a native XAML control. To do so, implement the <code>Microsoft.ReactNative.IViewManagerRequiresNativeLayout</code> interface:</li>
</ul>
<pre><code class="hljs css language-diff"><span class="hljs-deletion">-internal class CustomUserControlViewManager : AttributedViewManager&lt;CustomUserControl&gt; {</span><br /><span class="hljs-addition">+internal class CustomUserControlViewManager : AttributedViewManager&lt;CustomUserControl&gt;, IViewManagerRequiresNativeLayout {</span><br />// rest of the view manager goes here...<br /><span class="hljs-addition">+   // IViewManagerRequiresNativeLayout</span><br /><span class="hljs-addition">+   virtual bool RequiresNativeLayout() { return true; }</span><br /></code></pre>
</span></div></div><div id="tab-group-56-content-58" class="tab-pane" data-group="group_56" tabindex="-1"><div><span><p>For this sample, assume we already have the <code>CustomUserControl</code> defined in the C# example.</p>
<h3><a class="anchor" aria-hidden="true" id="1-authoring-your-view-manager"></a><a href="#1-authoring-your-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Authoring your View Manager</h3>
<p>Here is a sample view manager written in C++ called <code>CustomUserControlViewManager</code>.</p>
<p><code>CustomUserControlViewManager.h</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"winrt/Microsoft.ReactNative.h"</span></span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>implementation <span class="token punctuation">{</span><br /><br /><span class="token keyword">struct</span> <span class="token class-name">CustomUserControlViewManager</span> <span class="token operator">:</span> <span class="token base-clause">winrt<span class="token double-colon punctuation">::</span><span class="token class-name">implements</span><span class="token operator">&lt;</span><br />                                             <span class="token class-name">CustomUserControlViewManager</span><span class="token punctuation">,</span><br />                                             winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span><span class="token class-name">IViewManager</span><span class="token punctuation">,</span><br />                                             winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span><span class="token class-name">IViewManagerWithNativeProperties</span><span class="token punctuation">,</span><br />                                             winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span><span class="token class-name">IViewManagerWithCommands</span><span class="token punctuation">,</span><br />                                             winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span><span class="token class-name">IViewManagerWithExportedEventTypeConstants</span><span class="token punctuation">,</span><br />                                             winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span><span class="token class-name">IViewManagerWithReactContext</span><span class="token operator">></span></span> <span class="token punctuation">{</span><br /> <span class="token keyword">public</span><span class="token operator">:</span><br />  <span class="token function">CustomUserControlViewManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">// IViewManager</span><br />  winrt<span class="token double-colon punctuation">::</span>hstring <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Xaml<span class="token double-colon punctuation">::</span>FrameworkElement <span class="token function">CreateView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">// IViewManagerWithNativeProperties</span><br />  winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>Foundation<span class="token double-colon punctuation">::</span>Collections<span class="token double-colon punctuation">::</span><br />      IMapView<span class="token operator">&lt;</span>winrt<span class="token double-colon punctuation">::</span>hstring<span class="token punctuation">,</span> winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>ViewManagerPropertyType<span class="token operator">></span><br />      <span class="token function">NativeProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token keyword">void</span> <span class="token function">UpdateProperties</span><span class="token punctuation">(</span><br />      winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Xaml<span class="token double-colon punctuation">::</span>FrameworkElement <span class="token keyword">const</span> <span class="token operator">&amp;</span>view<span class="token punctuation">,</span><br />      winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IJSValueReader <span class="token keyword">const</span> <span class="token operator">&amp;</span>propertyMapReader<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">// IViewManagerWithCommands</span><br />  winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>Foundation<span class="token double-colon punctuation">::</span>Collections<span class="token double-colon punctuation">::</span>IVectorView<span class="token operator">&lt;</span>winrt<span class="token double-colon punctuation">::</span>hstring<span class="token operator">></span> <span class="token function">Commands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token keyword">void</span> <span class="token function">DispatchCommand</span><span class="token punctuation">(</span><br />      winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Xaml<span class="token double-colon punctuation">::</span>FrameworkElement <span class="token keyword">const</span> <span class="token operator">&amp;</span>view<span class="token punctuation">,</span><br />      winrt<span class="token double-colon punctuation">::</span>hstring <span class="token keyword">const</span> <span class="token operator">&amp;</span>commandId<span class="token punctuation">,</span><br />      winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IJSValueReader <span class="token keyword">const</span> <span class="token operator">&amp;</span>commandArgsReader<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">// IViewManagerWithExportedEventTypeConstants</span><br />  winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>ConstantProviderDelegate <span class="token function">ExportedCustomBubblingEventTypeConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>ConstantProviderDelegate <span class="token function">ExportedCustomDirectEventTypeConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">// IViewManagerWithReactContext</span><br />  winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IReactContext <span class="token function">ReactContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br />  <span class="token keyword">void</span> <span class="token function">ReactContext</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IReactContext reactContext<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">private</span><span class="token operator">:</span><br />  winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IReactContext m_reactContext<span class="token punctuation">{</span> <span class="token keyword">nullptr</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br /><span class="token punctuation">}</span><br /></code></pre>
<p><code>CustomUserControlViewManager.cpp</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CustomUserControlViewManager.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"JSValueReader.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"JSValueXaml.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"NativeModules.h"</span></span><br /><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> Windows<span class="token double-colon punctuation">::</span>Foundation<span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> Windows<span class="token double-colon punctuation">::</span>Foundation<span class="token double-colon punctuation">::</span>Collections<span class="token punctuation">;</span><br /><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Xaml<span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Xaml<span class="token double-colon punctuation">::</span>Media<span class="token punctuation">;</span><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Xaml<span class="token double-colon punctuation">::</span>Controls<span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>implementation <span class="token punctuation">{</span><br /><br /><span class="token comment">// IViewManager</span><br />hstring <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> L<span class="token string">"CustomUserControl"</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br />FrameworkElement <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">CreateView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> winrt<span class="token double-colon punctuation">::</span><span class="token class-name">ViewManagerSample</span><span class="token double-colon punctuation">::</span><span class="token function">CustomUserControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token comment">// IViewManagerWithNativeProperties</span><br />IMapView<span class="token operator">&lt;</span>hstring<span class="token punctuation">,</span> ViewManagerPropertyType<span class="token operator">></span> <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">NativeProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">auto</span> nativeProps <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">single_threaded_map</span><span class="token generic class-name"><span class="token operator">&lt;</span>hstring<span class="token punctuation">,</span> ViewManagerPropertyType<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />  nativeProps<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>L<span class="token string">"label"</span><span class="token punctuation">,</span> ViewManagerPropertyType<span class="token double-colon punctuation">::</span>String<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  nativeProps<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>L<span class="token string">"color"</span><span class="token punctuation">,</span> ViewManagerPropertyType<span class="token double-colon punctuation">::</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  nativeProps<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>L<span class="token string">"backgroundColor"</span><span class="token punctuation">,</span> ViewManagerPropertyType<span class="token double-colon punctuation">::</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />  <span class="token keyword">return</span> nativeProps<span class="token punctuation">.</span><span class="token function">GetView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">void</span> <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">UpdateProperties</span><span class="token punctuation">(</span><br />    FrameworkElement <span class="token keyword">const</span> <span class="token operator">&amp;</span>view<span class="token punctuation">,</span><br />    IJSValueReader <span class="token keyword">const</span> <span class="token operator">&amp;</span>propertyMapReader<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> control <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">try_as</span><span class="token generic class-name"><span class="token operator">&lt;</span>winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>CustomUserControl<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br /><br />    <span class="token keyword">const</span> JSValueObject <span class="token operator">&amp;</span>propertyMap <span class="token operator">=</span> <span class="token class-name">JSValue</span><span class="token double-colon punctuation">::</span><span class="token function">ReadObjectFrom</span><span class="token punctuation">(</span>propertyMapReader<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>pair <span class="token operator">:</span> propertyMap<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />      <span class="token keyword">auto</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>propertyName <span class="token operator">=</span> pair<span class="token punctuation">.</span>first<span class="token punctuation">;</span><br />      <span class="token keyword">auto</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>propertyValue <span class="token operator">=</span> pair<span class="token punctuation">.</span>second<span class="token punctuation">;</span><br /><br />      <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyName <span class="token operator">==</span> <span class="token string">"label"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />        <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyValue <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />          <span class="token keyword">auto</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>value <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span><span class="token function">box_value</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span><span class="token function">to_hstring</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />          control<span class="token punctuation">.</span><span class="token function">Label</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />          control<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span><span class="token class-name">CustomUserControl</span><span class="token double-colon punctuation">::</span><span class="token function">LabelProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span><br />      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyName <span class="token operator">==</span> <span class="token string">"color"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">To</span><span class="token generic class-name"><span class="token operator">&lt;</span>Brush<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />          control<span class="token punctuation">.</span><span class="token function">Foreground</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />          control<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span><span class="token class-name">Control</span><span class="token double-colon punctuation">::</span><span class="token function">ForegroundProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span><br />      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyName <span class="token operator">==</span> <span class="token string">"backgroundColor"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">To</span><span class="token generic class-name"><span class="token operator">&lt;</span>Brush<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />          control<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />          control<span class="token punctuation">.</span><span class="token function">ClearValue</span><span class="token punctuation">(</span><span class="token class-name">Control</span><span class="token double-colon punctuation">::</span><span class="token function">BackgroundProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />        <span class="token punctuation">}</span><br />      <span class="token punctuation">}</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token comment">// IViewManagerWithCommands</span><br />IVectorView<span class="token operator">&lt;</span>hstring<span class="token operator">></span> <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">Commands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />    <span class="token keyword">auto</span> commands <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">single_threaded_vector</span><span class="token generic class-name"><span class="token operator">&lt;</span>hstring<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    commands<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>L<span class="token string">"CustomCommand"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token keyword">return</span> commands<span class="token punctuation">.</span><span class="token function">GetView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">void</span> <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">DispatchCommand</span><span class="token punctuation">(</span><br />    FrameworkElement <span class="token keyword">const</span> <span class="token operator">&amp;</span>view<span class="token punctuation">,</span><br />    winrt<span class="token double-colon punctuation">::</span>hstring <span class="token keyword">const</span> <span class="token operator">&amp;</span>commandId<span class="token punctuation">,</span><br />    winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IJSValueReader <span class="token keyword">const</span> <span class="token operator">&amp;</span>commandArgsReader<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> control <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">try_as</span><span class="token generic class-name"><span class="token operator">&lt;</span>winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>CustomUserControl<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">if</span> <span class="token punctuation">(</span>commandId <span class="token operator">==</span> L<span class="token string">"CustomCommand"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />      <span class="token keyword">const</span> JSValueArray <span class="token operator">&amp;</span>commandArgs <span class="token operator">=</span> <span class="token class-name">JSValue</span><span class="token double-colon punctuation">::</span><span class="token function">ReadArrayFrom</span><span class="token punctuation">(</span>commandArgsReader<span class="token punctuation">)</span><span class="token punctuation">;</span><br />      <span class="token comment">// Execute command</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token comment">// IViewManagerWithExportedEventTypeConstants</span><br />ConstantProviderDelegate <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">ExportedCustomBubblingEventTypeConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IJSValueWriter <span class="token keyword">const</span><span class="token operator">&amp;</span> constantWriter<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token comment">// use constantWriter to define bubbling events, see ExportedCustomDirectEventTypeConstants</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br />ConstantProviderDelegate <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">ExportedCustomDirectEventTypeConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token double-colon punctuation">::</span>IJSValueWriter <span class="token keyword">const</span><span class="token operator">&amp;</span> constantWriter<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    constantWriter<span class="token punctuation">.</span><span class="token function">WritePropertyName</span><span class="token punctuation">(</span>L<span class="token string">"topMyEvent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    constantWriter<span class="token punctuation">.</span><span class="token function">WriteObjectBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token function">WriteProperty</span><span class="token punctuation">(</span>constantWriter<span class="token punctuation">,</span> L<span class="token string">"registrationName"</span><span class="token punctuation">,</span> L<span class="token string">"onMyEvent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    constantWriter<span class="token punctuation">.</span><span class="token function">WriteObjectEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token comment">// IViewManagerWithReactContext</span><br />IReactContext <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">ReactContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> m_reactContext<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">void</span> <span class="token class-name">CustomUserControlViewManager</span><span class="token double-colon punctuation">::</span><span class="token function">ReactContext</span><span class="token punctuation">(</span>IReactContext reactContext<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  m_reactContext <span class="token operator">=</span> reactContext<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token punctuation">}</span><br /></code></pre>
<h3><a class="anchor" aria-hidden="true" id="more-extensibility-points"></a><a href="#more-extensibility-points" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More extensibility points</h3>
<ul>
<li>In some scenarios, a view manager might need to have more context at view creation time in order to decide what kind of control to instantiate.
This can be achieved by having the view manager implement the <a href="IViewManagerCreateWithProperties"><code>IViewManagerCreateWithProperties</code></a> interface:</li>
</ul>
<pre><code class="hljs css language-diff">struct CustomUserControlViewManager : winrt::implements&lt;<br />                                             CustomUserControlViewManager,<br />                                             winrt::Microsoft::ReactNative::IViewManager,<br />                                             winrt::Microsoft::ReactNative::IViewManagerWithNativeProperties,<br />                                             winrt::Microsoft::ReactNative::IViewManagerWithCommands,<br />                                             winrt::Microsoft::ReactNative::IViewManagerWithExportedEventTypeConstants,<br /><span class="hljs-addition">+                                             winrt::Microsoft::ReactNative::IViewManagerCreateWithProperties,</span><br />                                             winrt::Microsoft::ReactNative::IViewManagerWithReactContext&gt; {<br /><span class="hljs-addition">+  // IViewManagerCreateWithProperties</span><br /><span class="hljs-addition">+  winrt::Windows::Foundation::IInspectable CreateViewWithProperties(winrt::Microsoft::ReactNative::IJSValueReader const &amp;propertyMapReader);</span><br /></code></pre>
<p>The <code>CreateViewWithProperties</code> method can then access the properties set in JSX by inspecting the <code>propertyMapReader</code> just like it is done in the <code>UpdateProperties</code> method.</p>
<ul>
<li>Your view manager is also able to declare that it wants to be responsible for its own sizing and layout. This is useful in scenarios where you are wrapping a native XAML control. To do so, implement the <code>winrt::Microsoft::ReactNative::IViewManagerRequiresNativeLayout</code> interface:</li>
</ul>
<pre><code class="hljs css language-diff">struct CustomUserControlViewManager : winrt::implements&lt;<br />                                             CustomUserControlViewManager,<br />                                             winrt::Microsoft::ReactNative::IViewManager,<br />                                             winrt::Microsoft::ReactNative::IViewManagerWithNativeProperties,<br />                                             winrt::Microsoft::ReactNative::IViewManagerWithCommands,<br />                                             winrt::Microsoft::ReactNative::IViewManagerWithExportedEventTypeConstants,<br /><span class="hljs-addition">+                                             winrt::Microsoft::ReactNative::IViewManagerRequiresNativeLayout,</span><br />                                             winrt::Microsoft::ReactNative::IViewManagerWithReactContext&gt; {<br /><span class="hljs-addition">+   // IViewManagerRequiresNativeLayout</span><br /><span class="hljs-addition">+   bool RequiresNativeLayout() { return true; }</span><br /></code></pre>
<h3><a class="anchor" aria-hidden="true" id="2-registering-your-view-manager"></a><a href="#2-registering-your-view-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Registering your View Manager</h3>
<p>As with native modules, we want to register our new <code>CustomUserControlViewManager</code> with React Native so we can actually use it. To do this, first we're going to create a <code>ReactPackageProvider</code> which implements <a href="https://github.com/microsoft/react-native-windows/blob/main/vnext/Microsoft.ReactNative/IReactPackageProvider.idl"><code>Microsoft.ReactNative.IReactPackageProvider</code></a>.</p>
<p><code>ReactPackageProvider.idl</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token keyword">namespace</span> ViewManagerSample<br /><span class="token punctuation">{</span><br />    <span class="token punctuation">[</span>webhosthidden<span class="token punctuation">]</span><br />    <span class="token punctuation">[</span>default_interface<span class="token punctuation">]</span><br />    runtimeclass ReactPackageProvider <span class="token operator">:</span> Microsoft<span class="token punctuation">.</span>ReactNative<span class="token punctuation">.</span>IReactPackageProvider<br />    <span class="token punctuation">{</span><br />        <span class="token function">ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /></code></pre>
<p>After that we add the .h and .cpp files:</p>
<p><code>ReactPackageProvider.h</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.g.h"</span></span><br /><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>implementation<br /><span class="token punctuation">{</span><br />    <span class="token keyword">struct</span> <span class="token class-name">ReactPackageProvider</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">ReactPackageProviderT</span><span class="token operator">&lt;</span><span class="token class-name">ReactPackageProvider</span><span class="token operator">></span></span><br />    <span class="token punctuation">{</span><br />        <span class="token function">ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span><br /><br />        <span class="token keyword">void</span> <span class="token function">CreatePackage</span><span class="token punctuation">(</span>IReactPackageBuilder <span class="token keyword">const</span><span class="token operator">&amp;</span> packageBuilder<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>factory_implementation<br /><span class="token punctuation">{</span><br />    <span class="token keyword">struct</span> <span class="token class-name">ReactPackageProvider</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">ReactPackageProviderT</span><span class="token operator">&lt;</span><span class="token class-name">ReactPackageProvider</span><span class="token punctuation">,</span> implementation<span class="token double-colon punctuation">::</span><span class="token class-name">ReactPackageProvider</span><span class="token operator">></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /></code></pre>
<p><code>ReactPackageProvider.cpp</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.g.cpp"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ModuleRegistration.h></span></span><br /><br /><span class="token comment">// NOTE: You must include the headers of your native modules here in</span><br /><span class="token comment">// order for the AddAttributedModules call below to find them.</span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CustomUserControlViewManager.h"</span></span><br /><br /><span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>Microsoft<span class="token double-colon punctuation">::</span>ReactNative<span class="token punctuation">;</span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>ViewManagerSample<span class="token double-colon punctuation">::</span>implementation <span class="token punctuation">{</span><br /><br /><span class="token keyword">void</span> <span class="token class-name">ReactPackageProvider</span><span class="token double-colon punctuation">::</span><span class="token function">CreatePackage</span><span class="token punctuation">(</span>IReactPackageBuilder <span class="token keyword">const</span><span class="token operator">&amp;</span> packageBuilder<span class="token punctuation">)</span><br /><span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  packageBuilder<span class="token punctuation">.</span><span class="token function">AddViewManager</span><span class="token punctuation">(</span><br />      L<span class="token string">"CustomUserControlViewManager"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> winrt<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make</span><span class="token generic class-name"><span class="token operator">&lt;</span>CustomUserControlViewManager<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token punctuation">}</span> <span class="token comment">// namespace winrt::ViewManagerSample::implementation</span><br /></code></pre>
<p>Here we've implemented the <code>CreatePackage</code> method, which receives <code>packageBuilder</code> to build contents of the package. And then we call <code>AddViewManager</code> with the name of our view manager and a lambda which returns an instance of the view manager.</p>
<p>Now that we have the <code>ReactPackageProvider</code>, it's time to register it within our <code>ReactApplication</code>. We do that by simply adding the provider to the <code>PackageProviders</code> property.</p>
<p><code>App.cpp</code>:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"pch.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"App.h"</span></span><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReactPackageProvider.h"</span></span><br /><br /><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"winrt/ViewManagerSample.h"</span></span><br /><br /><span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>SampleApp<span class="token double-colon punctuation">::</span>implementation <span class="token punctuation">{</span><br /><br /><span class="token class-name">App</span><span class="token double-colon punctuation">::</span><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><br />  <span class="token comment">/* Other Init Code */</span><br /><br />  <span class="token function">PackageProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">make</span><span class="token generic class-name"><span class="token operator">&lt;</span>ReactPackageProvider<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Includes all modules in this project</span><br />  <span class="token function">PackageProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span><span class="token class-name">ViewManagerSample</span><span class="token double-colon punctuation">::</span><span class="token function">ReactPackageProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">/* Other Init Code */</span><br /><span class="token punctuation">}</span><br /><br /><span class="token punctuation">}</span> <span class="token comment">// namespace winrt::SampleApp::implementation</span><br /></code></pre>
<p>This example assumes that the <code>ViewManagerSample::ReactPackageProvider</code> we created above is in a different project (assembly) than our application. However you'll notice that by default we also added a <code>SampleApp::ReactPackageProvider</code>.</p>
<p>The <code>SampleApp::ReactPackageProvider</code> is a convenience that makes sure that all native modules and view managers defined within the app project automatically get registered. So if you're creating your native modules directly within the app project, you won't actually want to define a separate <code>ReactPackageProvider</code>.</p>
</span></div></div></div></div>
<h3><a class="anchor" aria-hidden="true" id="3-using-your-view-manager-in-jsx"></a><a href="#3-using-your-view-manager-in-jsx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Using your View Manager in JSX</h3>
<p><code>ViewManagerSample.js</code>:</p>
<pre><code class="hljs css language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  AppRegistry<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  requireNativeComponent<span class="token punctuation">,</span>
  StyleSheet<span class="token punctuation">,</span>
  UIManager<span class="token punctuation">,</span>
  View<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> CustomUserControl <span class="token operator">=</span> <span class="token function">requireNativeComponent</span><span class="token punctuation">(</span><span class="token string">'CustomUserControl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ViewManagerSample</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">onPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_customControlRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token function">findNodeHandle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_customControlRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
      UIManager<span class="token punctuation">.</span><span class="token function">dispatchViewManagerCommand</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> 
        UIManager<span class="token punctuation">.</span><span class="token function">getViewManagerConfig</span><span class="token punctuation">(</span><span class="token string">'CustomUserControl'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Commands<span class="token punctuation">.</span>CustomCommand<span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'arg1'</span><span class="token punctuation">,</span> <span class="token string">'arg2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CustomUserControl</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>customcontrol<span class="token punctuation">}</span></span> 
           <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CustomUserControl!<span class="token punctuation">"</span></span> 
           <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ref</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_customControlRef <span class="token operator">=</span> ref<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> 
           <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Call CustomUserControl Commands!<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">justifyContent</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alignItems</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'#F5FCFF'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">customcontrol</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#333333'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'#006666'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent</span><span class="token punctuation">(</span><span class="token string">'ViewManagerSample'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ViewManagerSample<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 10/30/2025</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/react-native-windows/docs/native-modules"><span class="arrow-prev">← </span><span>Native Modules</span></a><a class="docs-next button" href="/react-native-windows/docs/native-modules-setup"><span>Native Module Setup</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a><ul class="toc-headings"><li><a href="#note-about-uwp-xaml-controls">Note about UWP XAML controls</a></li></ul></li><li><a href="#initial-setup">Initial Setup</a></li><li><a href="#sample-view-manager">Sample view manager</a><ul class="toc-headings"><li><a href="#attributes">Attributes</a></li><li><a href="#1-authoring-your-view-manager">1. Authoring your View Manager</a></li><li><a href="#2-registering-your-view-manager">2. Registering your View Manager</a></li><li><a href="#more-extensibility-points">More extensibility points</a></li><li><a href="#1-authoring-your-view-manager-1">1. Authoring your View Manager</a></li><li><a href="#more-extensibility-points-1">More extensibility points</a></li><li><a href="#2-registering-your-view-manager-1">2. Registering your View Manager</a></li><li><a href="#3-using-your-view-manager-in-jsx">3. Using your View Manager in JSX</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>React Native Docs</h5><a href="https://reactnative.dev/docs/getting-started">Getting Started</a><a href="https://reactnative.dev/docs/tutorial">Tutorial</a><a href="https://reactnative.dev/docs/components-and-apis">Components and APIs</a><a href="https://reactnative.dev/docs/more-resources">More Resources</a></div><div><h5>React Native for Windows Docs</h5><div style="color:white;font-weight:500;font-size:16px"><a href="/react-native-windows/docs/getting-started">Get Started with Windows</a></div><a href="/react-native-windows/docs/parity-status">React Native Windows Components and APIs</a><a href="/react-native-windows/docs/native-modules">Native Modules</a><a href="/react-native-windows/docs/view-managers">Native UI Components</a></div><div><h5>Connect With Us On</h5><a href="https://devblogs.microsoft.com/react-native/">Blog</a><a href="https://twitter.com/ReactNativeMSFT" target="_blank">Twitter</a><a href="https://github.com/microsoft/react-native-windows" target="_blank">GitHub</a><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples" target="_blank">Samples</a></div></section></footer></div></body></html>