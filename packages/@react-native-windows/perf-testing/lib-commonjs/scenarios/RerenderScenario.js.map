{"version":3,"file":"RerenderScenario.js","sourceRoot":"","sources":["../../src/scenarios/RerenderScenario.ts"],"names":[],"mappings":";AAAA;;;;;GAKG;;;AAKH,qDAAgD;AAGhD;;;;;;;;;;;;;;;;;;;GAmBG;AACH,MAAa,gBAAgB;IAI3B,YACE,IAAY,EACK,SAA6B,EAC7B,UAIb,EAAE;QALW,cAAS,GAAT,SAAS,CAAoB;QAC7B,YAAO,GAAP,OAAO,CAIlB;QAEN,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,WAAW,GAAG,yBAAyB,IAAI,EAAE,CAAC;IACrD,CAAC;IAED,KAAK,CAAC,GAAG;;QACP,OAAO,IAAA,yBAAW,EAAC,IAAI,CAAC,SAAS,EAAE;YACjC,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,IAAI,EAAE,MAAA,IAAI,CAAC,OAAO,CAAC,IAAI,mCAAI,EAAE;YAC7B,UAAU,EAAE,MAAA,IAAI,CAAC,OAAO,CAAC,UAAU,mCAAI,CAAC;YACxC,QAAQ,EAAE,KAAK,EAAC,OAAO,EAAC,EAAE;gBACxB,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE;oBAChC,MAAM,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;iBAC7C;qBAAM;oBACL,gEAAgE;oBAChE,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAClC;YACH,CAAC;SACF,CAAC,CAAC;IACL,CAAC;CACF;AAhCD,4CAgCC","sourcesContent":["/**\r\n * Copyright (c) Microsoft Corporation.\r\n * Licensed under the MIT License.\r\n *\r\n * @format\r\n */\r\n\r\nimport * as React from 'react';\r\nimport type {IScenario} from '../interfaces/IComponentPerfTest';\r\nimport type {PerfMetrics} from '../interfaces/PerfMetrics';\r\nimport {measurePerf} from '../core/measurePerf';\r\nimport type {RenderHelpers} from '../core/measurePerf';\r\n\r\n/**\r\n * A reusable scenario that measures component re-render time.\r\n *\r\n * Accepts an optional `triggerRerender` callback to simulate\r\n * prop changes or state updates specific to the component.\r\n *\r\n * @example\r\n * ```typescript\r\n * const rerenderScenario = new RerenderScenario(\r\n *   'Text rerender',\r\n *   <Text testID=\"perf-text\">Hello</Text>,\r\n *   {\r\n *     triggerRerender: (helpers) => {\r\n *       helpers.rerender(<Text testID=\"perf-text\">Updated</Text>);\r\n *     },\r\n *   }\r\n * );\r\n * const metrics = await rerenderScenario.run();\r\n * ```\r\n */\r\nexport class RerenderScenario implements IScenario {\r\n  readonly name: string;\r\n  readonly description: string;\r\n\r\n  constructor(\r\n    name: string,\r\n    private readonly component: React.ReactElement,\r\n    private readonly options: {\r\n      runs?: number;\r\n      warmupRuns?: number;\r\n      triggerRerender?: (helpers: RenderHelpers) => void | Promise<void>;\r\n    } = {},\r\n  ) {\r\n    this.name = name;\r\n    this.description = `Rerender scenario for ${name}`;\r\n  }\r\n\r\n  async run(): Promise<PerfMetrics> {\r\n    return measurePerf(this.component, {\r\n      name: this.name,\r\n      runs: this.options.runs ?? 10,\r\n      warmupRuns: this.options.warmupRuns ?? 1,\r\n      scenario: async helpers => {\r\n        if (this.options.triggerRerender) {\r\n          await this.options.triggerRerender(helpers);\r\n        } else {\r\n          // Default: re-render the same component (forces reconciliation)\r\n          helpers.rerender(this.component);\r\n        }\r\n      },\r\n    });\r\n  }\r\n}\r\n"]}