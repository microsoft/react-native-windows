{"version":3,"file":"PerfProfiler.js","sourceRoot":"","sources":["../../src/core/PerfProfiler.tsx"],"names":[],"mappings":";AAAA;;;;;GAKG;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,6CAA+B;AAmC/B;;;;;;;;;;;;GAYG;AACH,SAAgB,YAAY,CAAC,EAC3B,EAAE,EACF,QAAQ,EACR,QAAQ,GACU;IAClB,MAAM,QAAQ,GAAG,KAAK,CAAC,WAAW,CAChC,CACE,GAAW,EACX,KAA2C,EAC3C,cAAsB,EACtB,YAAoB,EACpB,SAAiB,EACjB,UAAkB,EAClB,EAAE;QACF,QAAQ,CAAC;YACP,KAAK;YACL,cAAc;YACd,YAAY;YACZ,SAAS;YACT,UAAU;SACX,CAAC,CAAC;IACL,CAAC,EACD,CAAC,QAAQ,CAAC,CACX,CAAC;IAEF,OAAO,CACL,oBAAC,KAAK,CAAC,QAAQ,IAAC,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,QAAQ,IACvC,QAAQ,CACM,CAClB,CAAC;AACJ,CAAC;AA9BD,oCA8BC","sourcesContent":["/**\r\n * Copyright (c) Microsoft Corporation.\r\n * Licensed under the MIT License.\r\n *\r\n * @format\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\n/**\r\n * Result from a single profiler measurement.\r\n */\r\nexport interface ProfilerResult {\r\n  /** The phase of the render ('mount' or 'update') */\r\n  phase: 'mount' | 'update' | 'nested-update';\r\n  /** Actual duration of the committed render (ms) */\r\n  actualDuration: number;\r\n  /** Duration of the base render (ms) */\r\n  baseDuration: number;\r\n  /** Start time of the render */\r\n  startTime: number;\r\n  /** Commit time of the render */\r\n  commitTime: number;\r\n}\r\n\r\n/**\r\n * Callback ref for collecting profiler results.\r\n */\r\nexport type OnRenderCallback = (result: ProfilerResult) => void;\r\n\r\n/**\r\n * Props for the PerfProfiler wrapper component.\r\n */\r\ninterface PerfProfilerProps {\r\n  /** Unique identifier for this profiler instance */\r\n  id: string;\r\n  /** Callback invoked on each render commit */\r\n  onResult: OnRenderCallback;\r\n  /** The component tree to profile */\r\n  children: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Wrapper around React.Profiler that collects structured performance data.\r\n *\r\n * This component captures render timings using the React Profiler API\r\n * and forwards them to the measurement engine via the `onResult` callback.\r\n *\r\n * @example\r\n * ```tsx\r\n * <PerfProfiler id=\"view-mount\" onResult={handleResult}>\r\n *   <View style={styles.container} />\r\n * </PerfProfiler>\r\n * ```\r\n */\r\nexport function PerfProfiler({\r\n  id,\r\n  onResult,\r\n  children,\r\n}: PerfProfilerProps): React.ReactElement {\r\n  const onRender = React.useCallback(\r\n    (\r\n      _id: string,\r\n      phase: 'mount' | 'update' | 'nested-update',\r\n      actualDuration: number,\r\n      baseDuration: number,\r\n      startTime: number,\r\n      commitTime: number,\r\n    ) => {\r\n      onResult({\r\n        phase,\r\n        actualDuration,\r\n        baseDuration,\r\n        startTime,\r\n        commitTime,\r\n      });\r\n    },\r\n    [onResult],\r\n  );\r\n\r\n  return (\r\n    <React.Profiler id={id} onRender={onRender}>\r\n      {children}\r\n    </React.Profiler>\r\n  );\r\n}\r\n"]}