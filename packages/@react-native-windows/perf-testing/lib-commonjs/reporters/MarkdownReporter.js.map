{"version":3,"file":"MarkdownReporter.js","sourceRoot":"","sources":["../../src/reporters/MarkdownReporter.ts"],"names":[],"mappings":";AAAA;;;;;GAKG;;;AAeH;;;;GAIG;AACH,MAAa,gBAAgB;IAC3B;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,WAA+B;QAC7C,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QACjD,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QAElD,IAAI,EAAE,GAAG,EAAE,CAAC;QAEZ,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,EAAE,IAAI,uBAAuB,CAAC;YAC9B,EAAE,IAAI,uDAAuD,CAAC;YAC9D,EAAE,IAAI,uDAAuD,CAAC;YAE9D,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE;gBACtB,MAAM,QAAQ,GAAG,CAAC,CAAC,eAAe;oBAChC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;oBAClD,CAAC,CAAC,KAAK,CAAC;gBACV,MAAM,OAAO,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzD,MAAM,MAAM,GACV,CAAC,CAAC,aAAa,KAAK,SAAS;oBAC3B,CAAC,CAAC,IAAI,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG;oBACnC,CAAC,CAAC,KAAK,CAAC;gBACZ,EAAE,IAAI,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,MAAM,QAAQ,MAAM,OAAO,MAAM,MAAM,UAAU,CAAC;aAC5E;YACD,EAAE,IAAI,IAAI,CAAC;SACZ;QAED,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,EAAE,IAAI,kBAAkB,CAAC;YACzB,EAAE,IAAI,GAAG,MAAM,CAAC,MAAM,qBAAqB,CAAC;YAC5C,EAAE,IAAI,gDAAgD,CAAC;YACvD,EAAE,IAAI,mDAAmD,CAAC;YAC1D,EAAE,IAAI,mDAAmD,CAAC;YAE1D,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE;gBACtB,EAAE;oBACA,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE;wBACrB,MAAM,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;wBAC3C,MAAM,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;wBAC7C,OAAO,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;wBACtC,MAAM,CAAC,CAAC,OAAO,CAAC,WAAW,MAAM,CAAC;aACrC;YACD,EAAE,IAAI,gBAAgB,CAAC;SACxB;QAED,OAAO,EAAE,CAAC;IACZ,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,OAAO,CAAC,WAA+B;QAC5C,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;QACxD,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;QACzD,MAAM,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC;QAEjC,IAAI,MAAM,GAAG,CAAC,EAAE;YACd,OAAO,KAAK,MAAM,IAAI,KAAK,wDAAwD,CAAC;SACrF;QACD,OAAO,SAAS,MAAM,qBAAqB,CAAC;IAC9C,CAAC;CACF;AA/DD,4CA+DC","sourcesContent":["/**\r\n * Copyright (c) Microsoft Corporation.\r\n * Licensed under the MIT License.\r\n *\r\n * @format\r\n */\r\n\r\nimport type {PerfMetrics} from '../interfaces/PerfMetrics';\r\n\r\n/**\r\n * Comparison info used when generating markdown reports.\r\n */\r\nexport interface ComparisonResult {\r\n  metrics: PerfMetrics;\r\n  baselineMetrics?: PerfMetrics;\r\n  percentChange?: number;\r\n  passed: boolean;\r\n  error?: string;\r\n}\r\n\r\n/**\r\n * Reporter that generates Markdown-formatted perf results.\r\n *\r\n * Used for CI/CD PR comments and artifact reports.\r\n */\r\nexport class MarkdownReporter {\r\n  /**\r\n   * Generate a full markdown report from comparison results.\r\n   */\r\n  static generate(comparisons: ComparisonResult[]): string {\r\n    const passed = comparisons.filter(c => c.passed);\r\n    const failed = comparisons.filter(c => !c.passed);\r\n\r\n    let md = '';\r\n\r\n    if (failed.length > 0) {\r\n      md += '### ❌ Regressions\\n\\n';\r\n      md += '| Scenario | Baseline | Current | Change | Status |\\n';\r\n      md += '|----------|----------|---------|--------|--------|\\n';\r\n\r\n      for (const f of failed) {\r\n        const baseline = f.baselineMetrics\r\n          ? `${f.baselineMetrics.meanDuration.toFixed(2)}ms`\r\n          : 'N/A';\r\n        const current = `${f.metrics.meanDuration.toFixed(2)}ms`;\r\n        const change =\r\n          f.percentChange !== undefined\r\n            ? `+${f.percentChange.toFixed(1)}%`\r\n            : 'N/A';\r\n        md += `| ${f.metrics.name} | ${baseline} | ${current} | ${change} | ❌ |\\n`;\r\n      }\r\n      md += '\\n';\r\n    }\r\n\r\n    if (passed.length > 0) {\r\n      md += '### ✅ Passed\\n\\n';\r\n      md += `${passed.length} test(s) passed\\n\\n`;\r\n      md += '<details>\\n<summary>Show details</summary>\\n\\n';\r\n      md += '| Scenario | Mean | Median | StdDev | Renders |\\n';\r\n      md += '|----------|------|--------|--------|---------|\\n';\r\n\r\n      for (const p of passed) {\r\n        md +=\r\n          `| ${p.metrics.name}` +\r\n          ` | ${p.metrics.meanDuration.toFixed(2)}ms` +\r\n          ` | ${p.metrics.medianDuration.toFixed(2)}ms` +\r\n          ` | ±${p.metrics.stdDev.toFixed(2)}ms` +\r\n          ` | ${p.metrics.renderCount} |\\n`;\r\n      }\r\n      md += '\\n</details>\\n';\r\n    }\r\n\r\n    return md;\r\n  }\r\n\r\n  /**\r\n   * Generate a short summary line for use in PR comments.\r\n   */\r\n  static summary(comparisons: ComparisonResult[]): string {\r\n    const passed = comparisons.filter(c => c.passed).length;\r\n    const failed = comparisons.filter(c => !c.passed).length;\r\n    const total = comparisons.length;\r\n\r\n    if (failed > 0) {\r\n      return `❌ ${failed}/${total} perf tests failed — performance regressions detected.`;\r\n    }\r\n    return `✅ All ${passed} perf tests passed.`;\r\n  }\r\n}\r\n"]}