<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Add Toast notifications to your React Native for Windows application · React Native for Windows</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;head&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Add Toast notifications to your React Native for Windows application · React Native for Windows"/><meta property="og:type" content="website"/><meta property="og:url" content="https://microsoft.github.io/react-native-windows/blog/2021/06/30/notifications"/><meta property="og:description" content="&lt;head&gt;"/><meta property="og:image" content="https://microsoft.github.io/react-native-windows/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://microsoft.github.io/react-native-windows/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-native-windows/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="stylesheet" href="/react-native-windows/css/code-block-buttons.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/react-native-windows/js/code-block-buttons.js"></script><script type="text/javascript" src="/react-native-windows/js/nav-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/react-native-windows/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-native-windows/css/prism.css"/><link rel="stylesheet" href="/react-native-windows/css/main.css"/><script src="/react-native-windows/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-windows/"><img class="logo" src="/react-native-windows/img/header_logo.svg" alt="React Native for Windows"/><h2 class="headerTitleWithLogo">React Native for Windows</h2></a><a href="/react-native-windows/versions"><h3>0.80</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/react-native-windows/docs/getting-started" target="_self">Docs</a></li><li class=""><a href="/react-native-windows/docs/flyout-component" target="_self">APIs</a></li><li class=""><a href="https://devblogs.microsoft.com/react-native/" target="_self">Blog</a></li><li class=""><a href="/react-native-windows/resources" target="_self">Resources</a></li><li class=""><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples" target="_self">Samples</a></li><li class=""><a href="/react-native-windows/support" target="_self">Support</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/react-native-windows/blog/2022/07/29/coreapp">Streamlining app creation with React Native for Windows CoreApp</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/blog/2022/02/11/settings">React Native for Windows is helping Settings improve more quickly</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/blog/2022/02/11/rnwinrt">Calling Windows APIs from React Native just got easier</a></li><li class="navListItem"><a class="navItem" href="/react-native-windows/blog/2021/08/05/win32component">Use Win32 features from a React Native for Windows application</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/react-native-windows/blog/2021/06/30/notifications">Add Toast notifications to your React Native for Windows application</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/react-native-windows/blog/2021/06/30/notifications">Add Toast notifications to your React Native for Windows application</a></h1><p class="post-meta">June 30, 2021</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/alexsklar" target="_blank" rel="noreferrer noopener">Alexander Sklar</a></p></div></header><div><span><p><head>
<meta http-equiv="Refresh" content="0; URL=https://devblogs.microsoft.com/react-native/react-native-windows-notifications/" />
</head></p>
<p>In this article, we will discuss how to enable your app to show toast notifications, which you can use to notify the user that something needs their attention, or to notify them that a long running operation has completed.</p>
<!--truncate-->
<h3><a class="anchor" aria-hidden="true" id="create-a-native-module"></a><a href="#create-a-native-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a native module</h3>
<p>This article assumes you have some familiarity with React Native for Windows native modules. If you need a refresher, check out <a href="https://microsoft.github.io/react-native-windows/docs/next/native-modules">the native modules documentation</a>.</p>
<p>The Windows toast notification API is fairly rich: it includes a number of UI <em>templates</em> that an app can use to customize how it wants the notification to look.
Some templates include text only, while others include text and images. Every template has some combination of these. You can see a list of the available templates <a href="https://docs.microsoft.com/en-us/previous-versions/windows/apps/hh761494(v=win.10)">here</a>.</p>
<p>We will create a native module which will have a single method, <code>raise</code>. The Windows toast notification API takes an XML document as input, which will specify the text and image sources that we want to show. However, it would be much more natural for us to work with JavaScript objects and JSON instead of XML markup.
So our <code>raise</code> method will take a JS object, which will include what template the app wants to use, as well as arrays of text and images that apply to the template. We will take the information in this JS object, and use it to construct the XML that we need to pass to the platform API.</p>
<h3><a class="anchor" aria-hidden="true" id="create-a-module"></a><a href="#create-a-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a module</h3>
<p>For the purpose of our demo, we will add a native module directly to a C++/WinRT example app. If you prefer, you can follow the steps below and apply them to a separate native module project. Note that you can also use C# to write native modules in a similar manner.  For more information about choosing between C++/WinRT and C#, see <a href="https://microsoft.github.io/react-native-windows/docs/native-code-language-choice">Native code language choice</a>.
We will start with our standard native module setup, by adding a <code>Notifications.h</code> file to our example app project. In this initial version, we'll use the simplest static Toast template (one string of text), so we'll have our <code>raise</code> method take a string:</p>
<pre><code class="hljs css language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;NativeModules.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;winrt/Windows.UI.Notifications.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;winrt/Windows.Data.Xml.Dom.h></span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span>Notifications<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>Data<span class="token double-colon punctuation">::</span>Xml<span class="token double-colon punctuation">::</span>Dom<span class="token punctuation">;</span>


<span class="token function">REACT_MODULE</span><span class="token punctuation">(</span>Notifications<span class="token punctuation">)</span>
<span class="token keyword">struct</span> <span class="token class-name">Notifications</span> <span class="token punctuation">{</span>

  <span class="token function">REACT_INIT</span><span class="token punctuation">(</span>Initialize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">Initialize</span><span class="token punctuation">(</span>React<span class="token double-colon punctuation">::</span>ReactContext <span class="token keyword">const</span><span class="token operator">&amp;</span> context<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span>
    m_context <span class="token operator">=</span> context<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">REACT_METHOD</span><span class="token punctuation">(</span>Raise<span class="token punctuation">,</span> L<span class="token string">"raise"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">Raise</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> text<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
  <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
  React<span class="token double-colon punctuation">::</span>ReactContext m_context<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Then in our app's <code>ReactPackageProvider.cpp</code>, we just include our new header:</p>
<pre><code class="hljs css language-diff">#include "pch.h"
#include "ReactPackageProvider.h"
#include "NativeModules.h"
<span class="hljs-addition">+#include "Notifications.h"</span>
using namespace winrt::Microsoft::ReactNative;

namespace winrt::example::implementation
{

void ReactPackageProvider::CreatePackage(IReactPackageBuilder const &amp;packageBuilder) noexcept
{
    AddAttributedModules(packageBuilder);
}

} // namespace winrt::example::implementation
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="starting-simple"></a><a href="#starting-simple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Starting simple</h3>
<p>In our JavaScript (<code>App.tsx</code> or <code>App.js</code>), we will import NativeModules and add a button that calls into our <code>raise</code> API when clicked. Here we are using a <a href="https://github.com/asklar/react-native-xaml">react-native-xaml</a> Button component, but you can use any UI component and toolkit you'd like.
Normally, you would call the <code>raise</code> API in response to some other event, like an upload/download operation completing.</p>
<pre><code class="hljs css language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  NativeModules
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-xaml'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      NativeModules<span class="token punctuation">.</span>Notifications<span class="token punctuation">.</span><span class="token function">raise</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>click me to send a toast<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>So now we have the basic setup, and you can set a breakpoint in the C++ code and validate that clicking on the button breaks into the C++ <code>Raise</code> method.
Now we get to have fun. First let's try the simplest static Toast template, <code>ToastText01</code>. This template just has one value for us to fill out, the text we want to show.
Here's the logic to send a toast using this template, in C++:</p>
<pre><code class="hljs css language-cpp">  <span class="token function">REACT_METHOD</span><span class="token punctuation">(</span>Raise<span class="token punctuation">,</span> L<span class="token string">"raise"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">Raise</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> textToShow<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">auto</span> xml <span class="token operator">=</span> <span class="token class-name">ToastNotificationManager</span><span class="token double-colon punctuation">::</span><span class="token function">GetTemplateContent</span><span class="token punctuation">(</span>ToastTemplateType<span class="token double-colon punctuation">::</span>ToastText01<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> element <span class="token operator">:</span> xml<span class="token punctuation">.</span><span class="token function">GetElementsByTagName</span><span class="token punctuation">(</span>L<span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">AppendChild</span><span class="token punctuation">(</span>xml<span class="token punctuation">.</span><span class="token function">CreateTextNode</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span><span class="token function">to_hstring</span><span class="token punctuation">(</span>textToShow<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">auto</span> toast <span class="token operator">=</span> <span class="token function">ToastNotification</span><span class="token punctuation">(</span>xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ToastNotificationManager</span><span class="token double-colon punctuation">::</span><span class="token function">CreateToastNotifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>toast<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="complete-solution"></a><a href="#complete-solution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Complete solution</h3>
<p>Note that it is necessary to convert the string values we get from JavaScript (as <code>std::string</code> values which are UTF-8) onto platform strings (<code>winrt::hstring</code>), which are UTF-16, so we use the <code>winrt::to_hstring</code> helper for that.
Now that we have the simple case, it's time to crank it up a notch: we want to be able to use any of the available toast templates, which can have a number of text strings and images. The image elements have a <code>src</code> attribute as well as an <code>alt</code> attribute for accessibility.</p>
<pre><code class="hljs css language-cpp">  <span class="token function">REACT_METHOD</span><span class="token punctuation">(</span>Raise<span class="token punctuation">,</span> L<span class="token string">"raise"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">Raise</span><span class="token punctuation">(</span><span class="token keyword">const</span> React<span class="token double-colon punctuation">::</span>JSValue<span class="token operator">&amp;</span> notification<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
  <span class="token punctuation">{</span>

    ToastTemplateType type <span class="token operator">=</span> ToastTemplateType<span class="token double-colon punctuation">::</span>ToastText01<span class="token punctuation">;</span>

    React<span class="token double-colon punctuation">::</span>JSValueObject obj<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>notification<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> React<span class="token double-colon punctuation">::</span>JSValueType<span class="token double-colon punctuation">::</span>String<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      obj<span class="token punctuation">[</span><span class="token string">"text"</span><span class="token punctuation">]</span> <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">AsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      obj <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">AsObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">auto</span> typeEntry <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"template"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>typeEntry <span class="token operator">!=</span> obj<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> typeEntry<span class="token operator">-></span>second<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> React<span class="token double-colon punctuation">::</span>JSValueType<span class="token double-colon punctuation">::</span>Int64<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      type <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>ToastTemplateType<span class="token operator">></span></span></span><span class="token punctuation">(</span>typeEntry<span class="token operator">-></span>second<span class="token punctuation">.</span><span class="token function">AsInt32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">auto</span> xml <span class="token operator">=</span> <span class="token class-name">ToastNotificationManager</span><span class="token double-colon punctuation">::</span><span class="token function">GetTemplateContent</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> entry <span class="token operator">:</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token keyword">auto</span> tagName <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span><span class="token function">to_hstring</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">auto</span> xmlElements <span class="token operator">=</span> xml<span class="token punctuation">.</span><span class="token function">GetElementsByTagName</span><span class="token punctuation">(</span>tagName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> React<span class="token double-colon punctuation">::</span>JSValueType<span class="token double-colon punctuation">::</span>String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        React<span class="token double-colon punctuation">::</span>JSValueArray strToArray<span class="token punctuation">;</span>
        strToArray<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">AsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">FillXmlElements</span><span class="token punctuation">(</span>xml<span class="token punctuation">,</span> xmlElements<span class="token punctuation">,</span> strToArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> React<span class="token double-colon punctuation">::</span>JSValueType<span class="token double-colon punctuation">::</span>Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        React<span class="token double-colon punctuation">::</span>JSValueArray objToArray<span class="token punctuation">;</span>
        objToArray<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">AsObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">FillXmlElements</span><span class="token punctuation">(</span>xml<span class="token punctuation">,</span> xmlElements<span class="token punctuation">,</span> objToArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">FillXmlElements</span><span class="token punctuation">(</span>xml<span class="token punctuation">,</span> xmlElements<span class="token punctuation">,</span> entry<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">AsArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">auto</span> toast <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span>Windows<span class="token double-colon punctuation">::</span>UI<span class="token double-colon punctuation">::</span><span class="token class-name">Notifications</span><span class="token double-colon punctuation">::</span><span class="token function">ToastNotification</span><span class="token punctuation">(</span>xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ToastNotificationManager</span><span class="token double-colon punctuation">::</span><span class="token function">CreateToastNotifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>toast<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


<span class="token keyword">private</span><span class="token operator">:</span>
  React<span class="token double-colon punctuation">::</span>ReactContext m_context<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">FillXmlElements</span><span class="token punctuation">(</span><span class="token keyword">const</span> XmlDocument<span class="token operator">&amp;</span> xml<span class="token punctuation">,</span> <span class="token keyword">const</span> XmlNodeList<span class="token operator">&amp;</span> xmlElements<span class="token punctuation">,</span> <span class="token keyword">const</span> React<span class="token double-colon punctuation">::</span>JSValueArray<span class="token operator">&amp;</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> arrValue <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">auto</span> node <span class="token operator">=</span> xmlElements<span class="token punctuation">.</span><span class="token function">GetAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arrValue<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> React<span class="token double-colon punctuation">::</span>JSValueType<span class="token double-colon punctuation">::</span>String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> value <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span><span class="token function">to_hstring</span><span class="token punctuation">(</span>arrValue<span class="token punctuation">.</span><span class="token function">AsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        node<span class="token punctuation">.</span><span class="token function">AppendChild</span><span class="token punctuation">(</span>xml<span class="token punctuation">.</span><span class="token function">CreateTextNode</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arrValue<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> React<span class="token double-colon punctuation">::</span>JSValueType<span class="token double-colon punctuation">::</span>Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> arrValueObj <span class="token operator">=</span> arrValue<span class="token punctuation">.</span><span class="token function">AsObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> entry <span class="token operator">:</span> arrValueObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">auto</span> attrName <span class="token operator">=</span> winrt<span class="token double-colon punctuation">::</span><span class="token function">to_hstring</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">auto</span> attr <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">Attributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetNamedItem</span><span class="token punctuation">(</span>attrName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>attr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            attr <span class="token operator">=</span> xml<span class="token punctuation">.</span><span class="token function">CreateAttribute</span><span class="token punctuation">(</span>attrName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            node<span class="token punctuation">.</span><span class="token function">Attributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetNamedItem</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          attr<span class="token punctuation">.</span><span class="token function">NodeValue</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span><span class="token function">box_value</span><span class="token punctuation">(</span>winrt<span class="token double-colon punctuation">::</span><span class="token function">to_hstring</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">AsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre>
<p>The code above will enable us to specify a <code>template</code> attribute, that we will set to be the numeric value of the template we want to use. You can find a table of such values in the <a href="https://docs.microsoft.com/uwp/api/Windows.UI.Notifications.ToastTemplateType">ToastTemplateType docs</a>. For example, <code>ToastText01</code> has a value of 4, so we'd specify <code>template: 4</code>.
It will also iterate through the rest of our JavaScript object parameter to discover the key/value pairs we want to set and apply them to the underlying XML that we will later pass to the platform.
Here is how you'd use this complete version from JavaScript:</p>
<pre><code class="hljs css language-jsx">  <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      NativeModules<span class="token punctuation">.</span>Notifications<span class="token punctuation">.</span><span class="token function">raise</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// ToastImageAndText01 - see https://docs.microsoft.com/uwp/api/Windows.UI.Notifications.ToastTemplateType</span>
          <span class="token comment">// The template schema can be found at https://docs.microsoft.com/previous-versions/windows/apps/hh761494(v=win.10)</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"hello world"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://microsoft.github.io/react-native-windows/img/header_logo.svg"</span><span class="token punctuation">,</span>
              <span class="token literal-property property">alt</span><span class="token operator">:</span> <span class="token string">"React logo"</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span> content<span class="token operator">=</span><span class="token string">"click me to send a toast"</span> <span class="token operator">/</span><span class="token operator">></span>

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="wrapping-up"></a><a href="#wrapping-up" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wrapping up</h3>
<p>In this article we have learned how to write a native module to call into the native Toast Notification APIs, and how to use the JSValue APIs to inspect values sent from the JavaScript side to the native module</p>
<p>You can find the <code>Notifications.h</code> header used in this article as a <a href="https://gist.github.com/asklar/12273ce7991c084d7d5c357206174b2d">GitHub Gist</a>.</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/react-native-windows/blog/">Recent Posts</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>React Native Docs</h5><a href="https://reactnative.dev/docs/getting-started">Getting Started</a><a href="https://reactnative.dev/docs/tutorial">Tutorial</a><a href="https://reactnative.dev/docs/components-and-apis">Components and APIs</a><a href="https://reactnative.dev/docs/more-resources">More Resources</a></div><div><h5>React Native for Windows Docs</h5><div style="color:white;font-weight:500;font-size:16px"><a href="/react-native-windows/docs/getting-started">Get Started with Windows</a></div><a href="/react-native-windows/docs/parity-status">React Native Windows Components and APIs</a><a href="/react-native-windows/docs/native-modules">Native Modules</a><a href="/react-native-windows/docs/view-managers">Native UI Components</a></div><div><h5>Connect With Us On</h5><a href="https://devblogs.microsoft.com/react-native/">Blog</a><a href="https://twitter.com/ReactNativeMSFT" target="_blank">Twitter</a><a href="https://github.com/microsoft/react-native-windows" target="_blank">GitHub</a><a href="https://github.com/microsoft/react-native-windows-samples/tree/main/samples" target="_blank">Samples</a></div></section></footer></div></body></html>